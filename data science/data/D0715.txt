ID=D0715
URL=http://www.javaworld.com/javaworld/jw-12-2000/jw-1215-security.html
SIZE=45345
DATE=16/07/02
TIME=14:56:21
DATASET=Java
HTML=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title> Java security evolution and concepts, Part 3: Applet security</title>
<!-- ssilog 7814 -->
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
<meta name="keywords" content=" Security, Cryptography, encryption, threats, attacks, Access Control, Digital Signatures, Public Key Infrastructure, certificates, Sandbox, fine-grain security, code signing, signtool, keytool, jarsigner">
<meta name="description" content="

In Parts 1 and 2 of this series, Raghavan Srinivas discussed concepts of network and Java security. In this third installment, he'll take a look at the challenges of security for, and the deployment of, applets. Get lots of popcorn and beer and work with the article patiently, since rough terrain lies ahead. It's assumed that you are familiar with the concepts presented in the first two parts of this series. (4,500 words)

">
<meta name="date" content="2000-12-15">
<META NAME="DC.Date" CONTENT="2000-12-15">
<basefont face="verdana, arial, helvetica" size="3" />
<style type="text/css">
            code {font-size: 90%; font-family: monospace;}
            pre {font-size: 90%; font-family: monospace;}
            td {font-size: 90%;}
</style>
<script language="javascript">
<!--// IDG.net Scripts
            function mail2Friend () {
                window.parent.location = "/MailToFriend?url=" + escape(document.location);
            }

            function openBrWindow() {
                win=window.open("http://www.javaworld.com/channel_content/jw-story-feedback.shtml",'Feedback','width=600,height=330,toolbar=no,location=no,directories=no,menubar=no,scrollbars=yes,resizable=yes');
            }
            //-->
        </script>
    </head>
<body bgcolor="#ffffff" text="#000000" link="#990033" vlink="#990033" alink="#990033" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" marginheight="0" marginwidth="0">
<table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td colspan="2" width="186" bgcolor="#006699"><a href="http://www.javaworld.com"><img height=81 src="http://www.javaworld.com/images/top_jwlogo.gif" width=186 border=0 ></a></td>
                <td bgcolor="#cccccc" width="100%" align="middle" valign="center"><!-- START TOP 468x60 BANNER -->
<TABLE CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
<TD>
<FONT COLOR="#000000" SIZE="-2" FACE="Arial,Helvetica,Sans-serif">
Advertisement: Support JavaWorld, click here!</FONT><BR>
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=top;sz=468x60;tile=1;ord=937609?" width="468" height="60" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=top;sz=468x60;tile=1;ord=937609?"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;pos=top;sz=468x60;tile=1;ord=937609?" border="0" height="60" width="468"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer1" visibility="hidden" width=468 height=60></ILAYER>
</TD>
</TR>
</TABLE>
<!-- END TOP 468x60 BANNER --></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td bgcolor="#006699" width="160"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=160 border=0 ></td>
                <td width="26" valign="top" align="left" bgcolor="#ffffff"><img height=8 src="http://www.javaworld.com/images/c_whtbottom.gif" width=8 border=0 ></td>
                <td width="100%"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ><IMG SRC="http://ad.doubleclick.net/ad/idg.pixel.global/idgpixel7.18.00;sz=1x1;ord=937609?" border=0 height="1" width="1"><IMG SRC="http://ad.doubleclick.net/ad/idg.pixel.usa.jw/usajw.081501;sz=1x1;ord=937609?" border=0 height="1" width="1"></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td bgcolor="#006699" width="160" align="middle" valign="center" nowrap><nobr><font face="Verdana, Arial, Sans-serif" color="#ffffff" size="2">December 2000</font></nobr><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=160 border=0 ></td>
                <td width="8"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
                <td bgcolor="#006699" width="8" valign="top"><img height=8 src="http://www.javaworld.com/images/c_bltlft.gif" width=8 border=0 ></td>
                <td bgcolor="#006699" width="100%" align="middle" valign="center">    <table width="100%" border="0" cellspacing="0" cellpadding="5">
        <tr>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">HOME</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/features/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">FEATURED TUTORIALS</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/columns/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">COLUMNS</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/news-reviews/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">NEWS & REVIEWS</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://forums.idg.net/webx?13@@.ee6b802"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">FORUM</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/resources/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">JW RESOURCES</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/info/jw-about-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">ABOUT JW</font></a></td>
        </tr>
    </table></td>
                <td bgcolor="#006699" width="8" align="right" valign="top"><img height=8 src="http://www.javaworld.com/images/c_bltrt.gif" width=8 border=0 ></td>
                <td width="8"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr valign="top">
                <td bgcolor="#006699" width="160" align="middle" valign="top">
                    <table width="160" border="0" cellspacing="0" cellpadding="0" bgcolor="#006699" summary="">
                        <tr>
                            <td width="8"><img alt="" height="1" src="http://www.javaworld.com/images/spacer.gif" width="8" /></td>
                            <td align="center">
                                <form action="http://www.javaworld.com/isearch" method="GET" name="search">
                                    <img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="2" /><br /><br />
                                    <input type="text" name="qt" size="12" maxlength="2047" /><br />
                                    <input type="image" value="search" src="http://www.javaworld.com/images/button_blue.gif" border="0" width="97" height="18" alt="GO" /><br />
                                    <input type="hidden" name="site" value="javaworld"><br />
                                   <!-- <a href="http://www.google.com/"><img src="http://www.javaworld.com/images/google-power-fp.gif" width="108" height="45" border="0" alt="Google.com"></a>-->
                                    <input type="hidden" name="ms" value="1">
                                    <input type="hidden" name="tid" value="1">
                                    <input type="hidden" name="st" value="1">
                                    <input type="hidden" name="rf" value="0">
                                   
                                </form>
                            </td>
                            <td width="8"><img alt="" height="1" src="http://www.javaworld.com/images/spacer.gif" width="8" /></td>
                        </tr>
                        <tr>
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                            <td><img height=1 alt="" src="http://www.javaworld.com/images/rule_ltblue.gif" width=144 vspace=2 ><br>
                                <a href="http://www.javaworld.com/archives/index-year.html"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff"><strong>ARCHIVE</strong></font></a><br>
                                <img height=1 alt="" src="http://www.javaworld.com/images/rule_ltblue.gif" width=144 vspace=2 ><br>
                                <strong><a href="http://www.javaworld.com/channel_content/jw-topical-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff">TOPICAL INDEX</font></a></strong></font><br><table cellspacing="0" cellpadding="0" border="0" summary="">
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a  href="http://www.javaworld.com/channel_content/jw-core-index.shtml"><font color="#ffffff">Core Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-enterprise-index.shtml"><font color="#ffffff">Enterprise Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-micro-index.shtml"><font color="#ffffff">Micro Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-applied-index.shtml"><font color="#ffffff">Applied Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-community-index.shtml"><font color="#ffffff">Java Community</font></a></strong></font><br /></td>
                        </tr>
                    </table><img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="2" /><br /> <a href="http://www.javaworld.com/columns/jw-qna-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff"><strong>JAVA Q&A INDEX</strong></font></a><br /><img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="2" /><br /> <a href="http://www.javaworld.com/columns/jw-tips-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff"><strong>JAVA TIPS INDEX</strong></font></a><br /> <img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="8" /><br /><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#CCCCCC"><strong>JavaWorld Services</strong></font><br /><img alt="" height="4" src="http://www.javaworld.com/images/spacer.gif" width="1" border="0" /><table cellspacing="0" cellpadding="0" border="0" summary=""><tr><td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /><br /><img alt="" height="7" src="http://www.javaworld.com/images/spacer.gif" width="1" border="0" /></td><td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/subscribe"><font color="#ffffff">Free JavaWorld newsletters</font></a></strong></font></td></tr><tr><td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /><br /></td> <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a  href="http://javaworld.pricegrabber.com"><font color="#ffffff">ProductFinder </font></a></strong></font></td></tr><tr> <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /><br /></td> <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a  href="http://www.javaworld.com/white-paper/index.shtml"><font color="#ffffff">White Paper Library</font></a></strong></font></td></tr>
</table>
<img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="8" /><br />
</td>
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                        </tr>
                        <tr valign="bottom">
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                            <td> </td>
                            <td width="8"><img height=8 alt="" src="http://www.javaworld.com/images/c_gryblbottom.gif" width=8 ></td>
                        </tr>
                        <tr>
                            <td width="8" bgcolor="#cccccc"> </td>
                            <td bgcolor="#cccccc"> </td>
                            <td width="8" bgcolor="#cccccc"> </td>
                        </tr>
                        <tr>
                       <td width="8" bgcolor="#cccccc"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                           <td align="middle" bgcolor="#cccccc"><!-- SKYSCRAPER AD START HERE -->
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=skyscraper;sz=120x600;tile=3;ord=937609?" width="120" height="600" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=skyscraper;sz=120x600;tile=3;ord=937609?"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;skyscraper=med;sz=120x600;tile=3;ord=937609?" border=0 height="600" width="120"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer3" visibility="hidden" width=120 height=600></ILAYER>
<!-- SKYSCRAPER AD ENDS HERE -->
</td>
                       <td width="8" bgcolor="#cccccc"><img height=8 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8></td>
                        </tr>
                        <tr>
                            <td width="8" bgcolor="#cccccc"> </td>
                            <td bgcolor="#cccccc"> </td>
                            <td width="8" bgcolor="#cccccc"> </td>
                        </tr>
                        <tr valign="top">
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                            <td> </td>
                            <td width="8"><img height=8 alt="" src="http://www.javaworld.com/images/c_grybltop.gif" width=8 ></td>
                        </tr>
                    </table>
                    <img height=8 src="http://www.javaworld.com/images/spacer.gif" width=160 border=0 ></td>
                    <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                <td width="100%">
                    <!-- ## MAIN CONTENT STARTS HERE ### -->
                    <font face="verdana, arial, helvetica" size="3">
                        <strong></strong>
                        <p>
                            <h1 align="CENTER"> Java security evolution and concepts, Part 3: Applet security</h1>
                            <h3 align="CENTER"> Tackle Java applet security with confidence</h3>
                        </p>
                        <!--<BLOCKQUOTE><STRONG>Summary</STRONG><BR>-->
                        <BLOCKQUOTE>
<STRONG>Summary</STRONG><BR>


In Parts 1 and 2 of this series, Raghavan Srinivas discussed concepts of network and Java security. In this third installment, he'll take a look at the challenges of security for, and the deployment of, applets. Get lots of popcorn and beer and work with the article patiently, since rough terrain lies ahead. It's assumed that you are familiar with the concepts presented in the first two parts of this series. <em>(4,500 words)</em>

</BLOCKQUOTE>
                        <!--</BLOCKQUOTE>-->
                        <a href="http://www.javaworld.com/feedback" target="Feedback"><STRONG>By   Raghavan N. Srinivas</STRONG></a>
                        <p><img src="http://www.javaworld.com/images/rule_ltblue.gif" width="100%" height="2"><br />
                           <img src="http://www.javaworld.com/images/jw-print-icon.gif" width="16" height="15" border="0" alt="Printer-friendly version" vspace="4" align="absmiddle" />
                           <a href="/javaworld/jw-12-2000/jw-1215-security_p.html">Printer-friendly version</a> | <img src="http://www.javaworld.com/images/jw-email-icon.gif" width="20" height="15" border="0" alt="Send this article to a friend"> <a href="javascript:mail2Friend()">Mail this to a friend</a></p>
                        <p><br /></p>
                         <font size=-1>  Page 1 of 4</font>
                        <p><!-- START BIG AD (336x280) -->
<table align="right" border="0" cellpadding="0" cellspacing="0"><tr valign="bottom" align="center"><td><font face="verdana, arial, geneva, sans-serif" color="#999999" size="-2">Advertisement</font></td></tr><tr><td><table border=1 bordercolor="#cccccc" cellspacing="5" cellpadding="0"><tr><td>
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=rectangle;sz=336x280;tile=5;ord=937609" width="336" height="280" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=rectangle;sz=336x280;tile=5;ord=937609"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;pos=rectangle;sz=336x280;tile=5;ord=937609" border=0 height="280" width="336"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer5" visibility="hidden" width=336 height=280></ILAYER>
</td></tr></table></td></tr></table>
<!-- END BIG AD (336x280) --></p>
                        <p><P>
<img align="left" width="13" height="36" src="/javaworld/abcs/J.gif" alt="J">ava's early growth was spurred by code downloadable over a network, better know as <em>applets.</em> Applet security has evolved with the growth of Java, and today is a source of frequent confusion due to the variety of Java versions, commercially available browsers, and plug-ins. <P>
This article, the third in the series, will cover the various requirements for securely running Java code downloaded from a network. Although mobile code is not a revolutionary concept, Java and the Internet present some unique challenges to computer security. The evolution of the Java architecture and its impact on core Java security was discussed in Parts 1 and 2. This article takes a different tack: a hands-on approach to tie all the concepts together by deploying a simple applet that writes to the local filesystem. <P>
Java security evolution and concepts: Read the whole series! <P>
<ul> <li><a href="/javaworld/jw-04-2000/jw-0428-security.html">Part 1: Learn computer security concepts and terms in this introductory overview</a></li> <li><a href="/javaworld/jw-07-2000/jw-0728-security.html">Part 2: Discover the ins and outs of Java security</a></li> <li><a href="/javaworld/jw-12-2000/jw-1215-security.html">Part 3: Tackle Java applet security with confidence</a></li> <li><a href="/javaworld/jw-05-2001/jw-0525-security.html">Part 4: Learn how optional packages extend and enhance Java security</a></li> <li><a href="/javaworld/jw-12-2001/jw-1221-jdk4security.html">Part 5: J2SE 1.4 offers numerous improvements to Java security</a></li> </ul> <P>
At the example applet's core is public-key cryptography, introduced earlier in this series. Code signed using the private key of the signer can be run on client machines once the public key corresponding to the signer is deemed as trusted on the respective machine. We'll also discuss how policy files, which accord permissions and keystore, can be used as a repository for public and private keys. Moreover, we'll highlight the Java 2 SDK security tools and Netscape's <code>signtool</code>, since they enable deployment. <P>
This article traces the evolution of Java security, beginning with application security in the initial release of Java 2 and moving on to the latest version of Java 2, version 1.3. This approach helps introduce the concepts gradually, starting with very simple concepts and culminating in a fairly advanced example. <P>
This series does not intend to provide a comprehensive guide to computer security. Computer security is a multifaceted issue touching several disciplines, departments, and cultures. Investments in technologies should be followed up with investments in personnel training, strict enforcement of policies, and periodic review of the overall security policy. <P>
<strong>Note:</strong> This article features a running Java <a href="http://www.javaworld.com/javaworld/jw-12-2000/security/writeFile.html">applet</a> designed to demonstrate applet security issues. Read below for more details. <P><FONT SIZE="+1"><STRONG> Application security </STRONG></FONT><BR>
Let's begin our investigation by looking at application security. In <a href="/jw-07-2000/jw-0728-security.html">Part 2</a> we saw how Java security has evolved from a sandbox model to a fine-grained security model. We also saw that applications (local code) by default get a free reign and are not subject to the same control as applets (network-downloadable code), which are typically deemed as untrusted. In a change from the past, in Java 2 security applications can be optionally subject to the same level of control as applets.
<P>
First, a quick note about <code>writeFile.java</code>, the code used in this article to illustrate the security features in Java 2. This program is a slightly modified version of the applet code provided by Sun, available over the Web to illustrate some of the features of Java 2 security. The program, modified to provide application support, attempts to create and write a file on the local filesystem. Access to a local filesystem is screened by the security manager. We will see throughout this article how this particular operation can be permitted in a secure manner. <P>
<CODE><P>
<BR>

/**<BR>

&nbsp;&nbsp;* By default, this raises a security exception as an applet.<BR>

&nbsp;&nbsp;*<BR>

&nbsp;&nbsp;* With JDK 1.2 appletviewer, <BR>

&nbsp;&nbsp;*&nbsp;&nbsp;if you configure your system to grant applets signed by "Duke"<BR>

&nbsp;&nbsp;*&nbsp;&nbsp;and downloaded from the Java Software Website to write a file<BR>

&nbsp;&nbsp;*&nbsp;&nbsp;to your /tmp directory (or to the file named "C:\tmpfoo" on a <BR>

&nbsp;&nbsp;*&nbsp;&nbsp;Windows system), then this applet can run.<BR>

&nbsp;&nbsp;*&nbsp;&nbsp;<BR>

&nbsp;&nbsp;* @version JDK 1.2<BR>

&nbsp;&nbsp;* @author&nbsp;&nbsp;Marianne Mueller<BR>

&nbsp;&nbsp;* @Modified by Raghavan Srinivas[Rags]<BR>

&nbsp;&nbsp;*/<BR>

<BR>

import java.awt.*;<BR>

import java.io.*;<BR>

import java.lang.*;<BR>

import java.applet.*;<BR>

<BR>

public class writeFile extends Applet {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;String myFile = "/tmp/foo";<BR>

&nbsp;&nbsp;&nbsp;&nbsp;File f = new File(myFile);<BR>

&nbsp;&nbsp;&nbsp;&nbsp;DataOutputStream dos;<BR>

<BR>

&nbsp;&nbsp;public void init() {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;<BR>

&nbsp;&nbsp;&nbsp;&nbsp;String osname = System.getProperty("os.name");<BR>

&nbsp;&nbsp;&nbsp;&nbsp;if (osname.indexOf("Windows") != -1) {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myFile="C:" + File.separator + "tmpfoo";<BR>

&nbsp;&nbsp;&nbsp;&nbsp;}<BR>

&nbsp;&nbsp;}<BR>

<BR>

&nbsp;&nbsp;public void paint(Graphics g) {<BR>

&nbsp;&nbsp;&nbsp;&nbsp; try {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(myFile),128));<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dos.writeBytes("Cats can hypnotize you when you least expect it\n");<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dos.flush();<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dos.close();<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.drawString("Successfully wrote to the file named " + myFile + " -- go take a look at it!", 10, 10);<BR>

&nbsp;&nbsp;&nbsp;&nbsp; }<BR>

<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp; catch (SecurityException e) {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.drawString("writeFile: caught security exception", 10, 10);<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>

&nbsp;&nbsp;&nbsp;&nbsp; catch (IOException ioe) {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawString("writeFile: caught i/o exception", 10, 10);<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>

&nbsp;&nbsp; }<BR>

&nbsp;&nbsp;&nbsp;&nbsp;public static void main(String args[]) {<BR>

&nbsp;&nbsp;&nbsp;&nbsp; Frame f = new Frame("writeFile");<BR>

&nbsp;&nbsp;&nbsp;&nbsp; writeFile&nbsp;&nbsp;&nbsp;&nbsp; writefile = new writeFile();<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp; writefile.init();<BR>

&nbsp;&nbsp;&nbsp;&nbsp; writefile.start();<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp; f.add("Center", writefile);<BR>

&nbsp;&nbsp;&nbsp;&nbsp; f.setSize(300, 100);<BR>

&nbsp;&nbsp;&nbsp;&nbsp; f.show();<BR>

&nbsp;&nbsp;&nbsp;&nbsp;}<BR>

}<BR>
</CODE><P>
Running the bytecode generated in a Java 2 Runtime Environment, Standard Edition (JRE) will let the application modify the file on the local filesystem by default, since the default policy does not subject Java 2 applications to a security manager. This policy is justified because applications are typically locally generated code and not downloaded over the network. The following command line produces the window shown in Figure 1, indicating that the file was created and written into. <P>
<CODE><P>
<BR>

$ java writeFile<BR>
</CODE><P>
<center><P>
<TABLE CELLPADDING="5" BORDER="0"><TR><TD><P>
<center><P>
<IMG VSPACE="3" WIDTH="298" HEIGHT="98" SRC="http://www.idg.net/microsites/javaworld//legacy/jw-12-2000/images/jw-1215-security1.gif"><P>
<BR><FONT SIZE="-1"><STRONG><P>
Figure 1. writeFile Application -- no security manager </STRONG></FONT></center><P>
</TD></TR></TABLE><P>
</center><P>
To subject the code to the Java 2 security manager, invoke the following command line, which should produce the results indicated in Figure 2. Notice that the application generated a security exception caused by an attempt to modify the local filesystem. The explicitly included security manager generated the exception. <P>
<CODE><P>
<BR>

$ java -Djava.security.manager writeFile<BR>
</CODE><P>
<center><P>
<TABLE CELLPADDING="5" BORDER="0"><TR><TD><P>
<center><P>
<IMG VSPACE="3" WIDTH="299" HEIGHT="100" SRC="http://www.idg.net/microsites/javaworld//legacy/jw-12-2000/images/jw-1215-security2.gif"><P>
<BR><FONT SIZE="-1"><STRONG><P>
Figure 2. writeFile Application -- including the security manager </STRONG></FONT></center><P>
</TD></TR></TABLE><P>
</center><P>
The cases illustrated above represent extreme examples of security policy. In the former case, the application was not subject to any control; in the latter, it was subject to a very rigid control. In most cases it will be necessary to set the policy somewhere in between.
<P>
You can accomplish an in-between policy using a policy file. To do so, create a policy file called <code>all.policy</code> in the working directory: <P>
<CODE><P>
<BR>

grant {<BR>

&nbsp;&nbsp;permission java.io.FilePermission "&lt;&lt;ALL FILES&gt;&gt;", "write";<BR>

};<BR>
</CODE><P>
Running the same piece of code with the following command line will allow modification of the local filesystem: <P>
<CODE><P>
<BR>

$ java -Djava.security.manager -Djava.security.policy=all.policy writeFile<BR>
</CODE><P>
In this example, the application was subject to the security manager, but the overall policy was governed by the policy file, which allowed <em>all</em> files on the local filesystem to be modified. A stricter policy might have been to allow modification of only the relevant file -- <code>tmpfoo</code> in this case.
<P>
I'll cover more details of the policy file, including the syntax of the entries, later in this article. But first, let's look at applet security and contrast it with application security.
<!-- break --><br /></p>
                        <font size=-1><a href=jw-1215-security-p2.html>Next page ></a><br>Page 1  Java security evolution and concepts, Part 3: Applet security<br>Page 2 <a href=jw-1215-security-p2.html>Applet security</a><br>Page 3 <a href=jw-1215-security-p3.html>The Software Development Kit (SDK) tools</a><br>Page 4 <a href=jw-1215-security-p4.html>Applet Deployment under Java 2 version 1.2</a><br> </font>
                        <p>
                            <img src="http://www.javaworld.com/images/jw-print-icon.gif" width="16" height="15" border="0" alt="Printer-friendly version" vspace="4" align="absmiddle" />
                            <a href="/javaworld/jw-12-2000/jw-1215-security_p.html">Printer-friendly version</a> | <img src="http://www.javaworld.com/images/jw-email-icon.gif" width="20" height="15" border="0" alt="Send this article to a friend"> <a href="javascript:mail2Friend()">Mail this to a friend</a></p>
                        <p><!-- REPLACE BIO --><br /></p>
                        <p><ul><A NAME="resources"></a><STRONG>Resources</STRONG>
<BR>

<LI>To run this article's example applet, go to: <BR><A HREF="http://www.javaworld.com/javaworld/jw-12-2000/security/writeFile.html">http://www.javaworld.com/javaworld/jw-12-2000/security/writeFile.html
</A><BR>


<LI>For all of the files, including the <code>writeFile.java</code> source file, associated with this article, go to: <BR><A HREF="http://www.javaworld.com/javaworld/jw-12-2000/security/">http://www.javaworld.com/javaworld/jw-12-2000/security/
</A><BR>


<li>"Java Security Evolution and Concepts," Raghavan N. Srinivas <em>(JavaWorld):</em>

<ul>
<li><a href="/javaworld/jw-04-2000/jw-0428-security.html">Part 1: Learn computer security concepts and terms in this introductory overview</a> (April 2000)</li>
<li><a href="/javaworld/jw-07-2000/jw-0728-security.html">Part 2: Discover the ins and outs of Java security</a> (July 2000)</li>
<li><a href="/javaworld/jw-12-2000/jw-1215-security.html">Part 3: Tackle Java applet security with confidence</a> (December 2000)</li>
<li><a href="/javaworld/jw-05-2001/jw-0525-security.html">Part 4: Learn how optional packages extend and enhance Java security</a> (May 2001)</li>
<li><a href="http://www.javaworld.com/javaworld/jw-12-2001/jw-1221-jdk4security.html">Part 5: J2SE 1.4 offers numerous improvements to Java security</a> (December 2001)</li>
</ul>

<strong><em>JavaWorld'</em>s security-related resources</strong>

<LI>For more articles covering Java security, visit the <strong>Security</strong> section of <em>JavaWorld'</em>s Topical Index: <BR><A HREF="http://www.javaworld.com/javaworld/topicalindex/jw-ti-security.html">http://www.javaworld.com/javaworld/topicalindex/jw-ti-security.html
</A><BR>


<LI>The Java Security discussion offers numerous conversations concerning security. It's also a great place to ask questions: <BR><A HREF="http://www.itworld.com/jump/jw-1215-security/forums.itworld.com/webx?14@@.ee6b80e">http://www.itworld.com/jump/jw-1215-security/forums.itworld.com/webx?14@@.ee6b80e
</A><BR>


<LI>Sign up for the <em>JavaWorld This Week</em> free weekly email newsletter and keep up with what's new at <em>JavaWorld</em>: <BR><A HREF="http://www.idg.net/jw-subscribe">http://www.idg.net/jw-subscribe
</A><BR>


<LI> <em>JavaWorld'</em>s <strong>Java Bookstore</strong> security page can point you to numerous security-related books: <BR><A HREF="http://www.javaworld.com/javaworld/books/jw-books-security.html">http://www.javaworld.com/javaworld/books/jw-books-security.html
</A><BR>


<strong>Security information from Java.sun.com</strong>

<LI>For comprehensive Java security information, read the Java Security API page: <BR><A HREF="http://java.sun.com/security">http://java.sun.com/security
</A><BR>


<LI>For the latest documentation on Java security, read the documentation from Java 2 version 1.3: <BR><A HREF="http://java.sun.com/j2se/1.3/docs/guide/security/index.html">http://java.sun.com/j2se/1.3/docs/guide/security/index.html
</A><BR>


<LI>"Low Level Security in Java," Frank Yellin: <BR><A HREF="http://java.sun.com/sfaq/verifier.html">http://java.sun.com/sfaq/verifier.html
</A><BR>


<LI>Java security Q&A archives: <BR><A HREF="http://archives.java.sun.com/archives/java-security.html">http://archives.java.sun.com/archives/java-security.html
</A><BR>


<LI>"Frequently Asked Questions -- Java Security": <BR><A HREF="http://java.sun.com/sfaq/">http://java.sun.com/sfaq/
</A><BR>


<LI>"Trail: Security in Java 2 SDK 1.2," Mary Dageforde: <BR><A HREF="http://web2.java.sun.com/docs/books/tutorial/security1.2/index.html">http://web2.java.sun.com/docs/books/tutorial/security1.2/index.html
</A><BR>


<LI>Java 2 SDK platform security tools: <BR><A HREF="http://java.sun.com/j2se/1.3/docs/tooldocs/tools.html#security">http://java.sun.com/j2se/1.3/docs/tooldocs/tools.html#security
</A><BR>


<LI>Default Policy Implementation and Policy File Syntax: <BR><A HREF="http://java.sun.com/j2se/1.3/docs/guide/security/PolicyFiles.html">http://java.sun.com/j2se/1.3/docs/guide/security/PolicyFiles.html
</A><BR>


<LI>Java 2 version 1.2 code signing example: <BR><A HREF="http://java.sun.com/security/signExample12/">http://java.sun.com/security/signExample12/
</A><BR>


<LI>Java plug-in documentation and download: <BR><A HREF="http://java.sun.com/products/plugin/index.html">http://java.sun.com/products/plugin/index.html
</A><BR>


<strong>Other important security-related resources</strong>

A list of CAs from which you can obtain code-signing certificates: https://certs.netscape.com/client.html

<LI>Netscape's security tools including <code>signtool</code>: <BR><A HREF="http://developer.netscape.com/docs/manuals/index.html?content=security.html">http://developer.netscape.com/docs/manuals/index.html?content=security.html
</A><BR>


<LI>CERT advisories -- a comprehensive list of security related problems with suggested remedial action: <BR><A HREF="http://www.cert.org/">http://www.cert.org/
</A><BR>


<LI> <em>Applied Cryptography: Protocols, Algorithms, and Source Code in C, 2nd Ed.,</em> Bruce Schneier (John Wiley and Sons, 1996) -- a fascinating book on the science and politics of cryptography: <BR><A HREF="http://www1.fatbrain.com/asp/bookinfo/bookinfo.asp?theisbn=0471128457">http://www1.fatbrain.com/asp/bookinfo/bookinfo.asp?theisbn=0471128457
</A><BR>


RSA Labs' FAQ about today's cryptography: ftp://ftp.rsasecurity.com/pub/labsfaq/labsfaq4.pdf

<LI>X.509 standard for certificates: <BR><A HREF="http://www.ietf.org/rfc/rfc2459.txt">http://www.ietf.org/rfc/rfc2459.txt
</A><BR>


</ul><br /></p>
                        <BR><BR>
<DIV ALIGN="CENTER">
<A NAME="sidebar1">
<A NAME="sidebar">
<TABLE CELLPADDING="3" CELLSPACING="0" BORDER="0">
<TR>
<TD BGCOLOR="#336699" ROWSPAN="1" COLSPAN="1">
</TR>
<TR>
<TD BGCOLOR="#CCCCCC">
<BR>
 <font face="verdana, arial, helvetica" size="2"><P><P><H2 ALIGN="CENTER"> Sidebar 1: Sandbox model </H2><P><P><P>Java supports both applications and applets. Applets -- small programs that could execute in a browser environment -- spurred Java's early growth. Applet code downloads at runtime and executes in the context of a JVM hosted by the browser. As an applet's code can be downloaded from anywhere in the network, Java's early designers thought such code should not be granted unlimited access to the target system. That thinking led to the <em>sandbox model</em> -- the security model introduced with JDK 1.0. <P>The sandbox model defines all code downloaded from the network as untrusted and confines it to a limited area of the browser -- the <em>sandbox.</em>  For instance, code downloaded from the network could not update the local filesystem under this model. It's probably more accurate to call this model a fenced-in model, since a sandbox does not connote severe confinement. <P><center><font size="+2"><strong>Sidebar 2: Java plug-in primer</strong></font></center> <P>A plug-in program adds functionality to a Web browser (or any other program). Java plug-in software enables Java applets to run using the Java 2 Runtime Environment, Standard Edition (JRE), rather than the browser's default runtime. The Java plug-in delivers several capabilities on different versions of Netscape Navigator and Internet Explorer, using the respective browsers' plug-in architecture and extension mechanisms. The capabilities include: <P><ul> <li><strong>Full Java 2 SDK support:</strong> This enables development and deployment of applets using the latest Java 2 SDK features, such as fine-grained security.</li> <li><strong>Free download and installation:</strong> Upon encountering a Web page that specifies Java plug-in software, the browser will download and install all the necessary files and render the applet, requiring minimal user intervention.</li> <li><strong>Free Java plug-in HTML converter:</strong> This is a simple command-line tool that modifies HTML pages to specify the use of Java plug-in software rather than the browser's default Java runtime.</li> </ul> <P>In summary, the Java plug-in provides a common framework for running Java applets across multiple browsers and versions. <P><P>
<P ALIGN="RIGHT"><A HREF="#return1">Return to article</A></P>
</FONT></TD>
</TR>
</TABLE>
</A>
</DIV>

                    </font>
                    <!-- ## MAIN CONTENT ENDS HERE ### -->
                </td>
                <td width="8"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td bgcolor="#006699" width="168" nowrap><nobr><img src="http://www.javaworld.com/images/spacer.gif" width=160 height=8 border=0 ><img src="http://www.javaworld.com/images/c_bllftbottom.gif" width=8 height=8 border=0 ></nobr></td>
                <td width="100%"><img src="http://www.javaworld.com/images/spacer.gif" width=1 height=1 border=0 ></td>
                <td width="8"><img src="http://www.javaworld.com/images/spacer.gif" width=8 height=8 border=0 ></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td width="186" bgcolor="#006699" align="middle"><nobr><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2"></font></nobr><a href="http://www.javaworld.com"><img height=81 src="http://www.javaworld.com/images/top_jwlogo.gif" width=186 border=0></a></td>
                <td bgcolor="#cccccc" width="8" valign="bottom"><img height=8 src="http://www.javaworld.com/images/c_blgrylftbottom.gif" width=8 border=0 ></td>
                <td bgcolor="#cccccc" width="100%" align="middle" valign="center"><!-- BOTTOM 468x60 AD STARTS HERE -->
<TABLE CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
<TD>
<FONT COLOR="#000000" SIZE="-2" FACE="Arial,Helvetica,Sans-serif">
Advertisement: Support JavaWorld, click here!</FONT><BR>
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=bottom;sz=468x60;tile=4;ord=937609?" width="468" height="60" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=bottom;sz=468x60;tile=4;ord=937609?"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;pos=bottom;sz=468x60;tile=4;ord=937609?" border=0 height="60" width="468"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer4" visibility="hidden" width=468 height=60></ILAYER>
</TD>
</TR>
</TABLE>
<!-- BOTTOM 468x60 AD ENDS HERE -->
</td>
                <td width="8"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <table bgcolor="#006699" align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td width="100%" align="middle" valign="center">    <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">
        <p>
            <br />
            <a href="http://www.javaworld.com"><font color="#ffffff">HOME</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/features/index.shtml"><font color="#ffffff">FEATURED TUTORIALS</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/columns/index.shtml"><font color="#ffffff">COLUMNS</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/news-reviews/index.shtml"><font color="#ffffff">NEWS & REVIEWS</font></a>&nbsp;|&nbsp;
            <a href="http://forums.idg.net/webx?13@@.ee6b802"><font color="#ffffff">FORUM</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/resources/index.shtml"><font color="#ffffff">JW RESOURCES</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/info/jw-about-index.shtml"><font color="#ffffff">ABOUT JW</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/feedback"><font color="#ffffff">FEEDBACK</font></a>
        </p>
        <p>

            <a href="http://www.javaworld.com/javaworld/common/jw-copyright.html"><font color="#ffffff">Copyright © 2002</font></a> JavaWorld.com, an IDG Communications company
        </p>
    </font>
</td>
                <td bgcolor="#ffffff" width="8"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
            <tr>
                <td width="100%" align="right" valign="top"><img height=8 src="http://www.javaworld.com/images/c_blrtbottom.gif" width=8 border=0 ></td>
                <td bgcolor="#ffffff" width="8"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <!--TOP_BANNER-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=top;sz=468x60;tile=1;ord=937609?" width=468 height=60 visibility="hidden" onLoad="moveToAbsolute(layer1.pageX,layer1.pageY);clip.height=60;clip.width=468;visibility='show';">
</LAYER>

<!--125x125-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=med;sz=125x125;tile=2;ord=937609?" width=125 height=125 visibility="hidden" onLoad="moveToAbsolute(layer2.pageX,layer2.pageY);clip.height=125;clip.width=125;visibility='show';">
</LAYER>

<!--SKYSCRAPER-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=skyscraper;sz=120x600;tile=3;ord=937609?" width=120 height=600 visibility="hidden" onLoad="moveToAbsolute(layer3.pageX,layer3.pageY);clip.height=600;clip.width=120;visibility='show';">
</LAYER>

<!--BOTTOM_BANNER-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=bottom;sz=468x60;tile=4;ord=937609?" width=468 height=60 visibility="hidden" onLoad="moveToAbsolute(layer4.pageX,layer4.pageY);clip.height=60;clip.width=468;visibility='show';">
</LAYER>

<!--Big AD-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=rectangle;sz=336x280;tile=5;ord=937609" width=336 height=280 visibility="hidden" onLoad="moveToAbsolute(layer5.pageX,layer5.pageY);clip.height=280;clip.width=336;visibility='show';">
</LAYER>
    </body>
<!-- stories1 -->
<!-- DOCID 761819 -->
</html>

