ID=D0712
URL=http://java.sun.com/docs/books/tutorial/javabeans/writingbean/index.html
SIZE=12786
DATE=16/07/02
TIME=14:56:00
DATASET=Java
HTML=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>Writing a Simple Bean</title>
<script language="JavaScript">
<!-- hide
function openWin(term) {
  url="../../information/glossary.html#" + term;
  myWin= window.open(url, "Glossary",
              "width=400,height=150,scrollbars=yes,status=no,toolbar=no,menubar=no");
  myWin.focus();
}
//-->
</script>
</head>
<body BGCOLOR="#ffffff" LINK="#000099">
<B><FONT SIZE="-1">The Java</font><sup><font size="-2">TM</font></sup> <font size="-1">Tutorial</FONT></B>
<br>
<table width="550">
<tr>
<td align="left" valign="center">
<a href="../beanbox/index.html" target="_top"><img src="../../images/PreviousArrow.gif" width="26" height="26" align="center" border="0" alt="Previous Page"></a>
<a href="../TOC.html#writingbean" target="_top"><img src="../../images/TOCIcon.gif" width="26" height="26" align="center" border="0" alt="Lesson Contents"></a>
<a href="../properties/index.html" target="_top"><img src="../../images/NextArrow.gif" width="26" height="26" align="center" border="0" alt="Next Page"></a></td>

<td align="center" valign="center">
<font size="-1">
<a href="../../index.html" target="_top">Start of Tutorial</a>
&gt;
<a href="../index.html" target="_top">Start of Trail</a>
</font>
</td>

<td align="right" valign="center">
<font size="-1">
<a href="../../search.html" target="_top">Search</a>
<br><a href="../../forms/sendusmail.html">Feedback Form</a>
</font>
</td>

</tr>
</table>
<img src="../../images/blueline.gif" width="550" height="8" ALIGN="BOTTOM" NATURALSIZEFLAG="3">

<br>
<font size="-1">
<b>Trail</b>: JavaBeans(TM)
</font>

<h2>
Lesson: Writing a Simple Bean
</h2>
<blockquote>
In this section you will learn more about Beans and the
BeanBox by
<ul>
 <li>Creating a simple Bean
 <li>Compiling and saving the Bean into a
     Java Archive (JAR) file
 <li>Loading the Bean into the ToolBox
 <li>Dropping a Bean instance into the BeanBox
 <li>Inspecting the Bean's properties, methods, and events
 <li>Generating an introspection report
</ul>

<p>
Your Bean will be named <code>SimpleBean</code>.
Here are the steps to create it and view it in the BeanBox:
<ol>
 <li><b>Write the <code>SimpleBean</code> code</b>. Put it in a file
     named <code>SimpleBean.java</code>, in the directory
     of your choice. Here's the code:
<blockquote><pre>   
import java.awt.*;
import java.io.Serializable;
         
public class SimpleBean extends Canvas
                        implements Serializable
{
    //Constructor sets inherited properties
    public SimpleBean(){
        setSize(60,40);
        setBackground(Color.red);
    }
}
</pre></blockquote>
<p>  
<code>SimpleBean</code> extends the
<a target="apidoc" href="http://java.sun.com/j2se/1.4/docs/api/java/awt/Canvas.html"><font color="#8800bb"><code>java.awt.Canvas</code></font></a><a target="apidoc" href="http://java.sun.com/j2se/1.4/docs/api/java/awt/Canvas.html"><img src="../../images/apiIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(in the API reference documentation)"></a> component.
<code>SimpleBean</code> also implements the
<a target="apidoc" href="http://java.sun.com/j2se/1.4/docs/api/java/io/Serializable.html"><font color="#8800bb"><code>java.io.Serializable</code></font></a><a target="apidoc" href="http://java.sun.com/j2se/1.4/docs/api/java/io/Serializable.html"><img src="../../images/apiIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(in the API reference documentation)"></a> interface,
a requirement for all Beans. <code>SimpleBean</code> sets the background
color and component size.

 <p>
 <li><b>Make sure the <code>CLASSPATH</code>
     environment variable is set</b> to point to all
     needed <code>.class</code> (or <code>.jar</code>) files. Here
     are some URLs that will help you to set CLASSPATH correctly:
     <ul>
      <li>The
          
<a target="_top" href="../../java/interpack/managingfiles.html">Managing Source and Class Files</a><a target="_top" href="../../java/interpack/managingfiles.html"><img src="../../images/tutorialIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(in the JavaBeans(TM) trail)"></a>  lesson gives good advice          on how and <i>when</i> to set your CLASSPATH.

      <li>The JDK Tool Reference Page provides complete CLASSPATH information for both
          
<a target="other" href="http://java.sun.com/products/jdk/1.1/docs/tooldocs/win32/index.html"><font color="#009bbb">Windows</font></a><a href="http://java.sun.com/products/jdk/1.1/docs/tooldocs/win32/index.html"><img src="../../images/otherIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(outside of the tutorial)"></a>  and          
<a target="other" href="http://java.sun.com/products/jdk/1.1/docs/tooldocs/solaris/index.html"><font color="#009bbb">Solaris</font></a><a href="http://java.sun.com/products/jdk/1.1/docs/tooldocs/solaris/index.html"><img src="../../images/otherIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(outside of the tutorial)"></a>           platforms.
     </ul>
     <p>

 <li><b>Compile the Bean:</b>
     <pre>
      javac SimpleBean.java
     </pre>
     This produces the class file <code>SimpleBean.class</code>
     <p>
 <li><b>Create a manifest file</b>. Use your favorite text editor
     to create a file, we'll call it <code>manifest.tmp</code>,
     that contains the following text:
     <pre>
     Name: SimpleBean.class
     Java-Bean: True
     </pre>
 <li><b>Create the JAR file</b>. The JAR file will contain the
     manifest and the <code>SimpleBean</code> class file:
     <pre>
     jar cfm SimpleBean.jar manifest.tmp SimpleBean.class
     </pre>
     See the 
<a target="_top" href="../../jar/index.html">JAR Files</a><a target="_top" href="../../jar/index.html"><img src="../../images/tutorialIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(in the JavaBeans(TM) trail)"></a>  trail, and the       
<a target="other" href="http://java.sun.com/products/jdk/1.1/docs/guide/jar/index.html"><font color="#009bbb">JDK JAR file documentation</font></a><a href="http://java.sun.com/products/jdk/1.1/docs/guide/jar/index.html"><img src="../../images/otherIcon.gif" width=11 height=11 border=0 align="ABSMIDDLE" alt="(outside of the tutorial)"></a>  for complete information on JAR files.     <p>

<li><b>Load the JAR file</b> into the ToolBox. Select
     the File|LoadJar... menu item. This will bring up a
     file browser. Navigate to the <code>SimpleBean.jar</code> location and
     select it. <code>SimpleBean</code> will appear at the bottom
     of the ToolBox. (Note that when the BeanBox is
     started, all Beans in JAR files in the
     <code>beans/jars</code> directory are automatically
     loaded into the ToolBox).
     <p>
<li><b>Drop a <code>SimpleBean</code> instance into the BeanBox</b>.
     Click on the word <code>SimpleBean</code> in the ToolBox. The cursor
     will change to a crosshair. Move the cursor to a spot within the
     BeanBox and click. SimpleBean will appear as a
     painted rectangle with a hatched border. This border means
     that <code>SimpleBean</code> is selected. The
     <code>SimpleBean</code> properties will appear in the
     Properties sheet.
</ol>
 
<p>
You can resize <code>SimpleBean</code>, because it inherits from
<code>Canvas</code>, by dragging a corner. You will see the cursor
change to a right angle when over a corner. You can also reposition
<code>SimpleBean</code> within the BeanBox by dragging on any non-corner
portion of the hatched border. You will see the cursor change to crossed
arrows when in  position to move the Bean.

</blockquote>
<h3>SimpleBean Makefiles</h3>
<blockquote>
<p>
Below are two makefiles (Unix and Windows) set up to
create <code>SimpleBean</code>.

<blockquote><pre>
<hr>
# gnumake file

CLASSFILES= SimpleBean.class

JARFILE= SimpleBean.jar

all: $(JARFILE)

# Create a JAR file with a suitable manifest.
$(JARFILE): $(CLASSFILES) $(DATAFILES)
        echo "Name: SimpleBean.class" >> manifest.tmp
        echo "Java-Bean: True" >> manifest.tmp
        jar cfm $(JARFILE) manifest.tmp *.class
        @/bin/rm manifest.tmp

# Compile the sources
%.class: %.java
        export CLASSPATH; CLASSPATH=. ; \
        javac $&lt;

# make clean
clean:
        /bin/rm -f *.class
        /bin/rm -f $(JARFILE)
<hr>
</pre></blockquote>
<p>
Here is the Windows <code>nmake</code> version:

<blockquote><pre>
<hr>
# nmake file
CLASSFILES= simplebean.class

JARFILE= simplebean.jar

all: $(JARFILE)

# Create a JAR file with a suitable manifest.

$(JARFILE): $(CLASSFILES) $(DATAFILES)
        jar cfm $(JARFILE) &lt;&lt;manifest.tmp *.class
Name: SimpleBean.class
Java-Bean: True
&lt;&lt;

.SUFFIXES: .java .class

{sunw\demo\simple}.java{sunw\demo\simple}.class :
        set CLASSPATH=.
        javac $&lt;

clean:
        -del sunw\demo\simple\*.class
        -del $(JARFILE)
</pre></blockquote>
<p>

You can use these makefiles as templates for creating your own
Bean makefiles. The example Bean makefiles, in the
<code>beans/demo</code> directory, also show you how to use
makefiles to build and maintain your Beans.
</blockquote>
<p> 

<h3>Inspecting SimpleBean Properties and Events</h3>
<blockquote>
<p>
The Properties sheet displays the selected Bean's properties.
With <code>SimpleBean</code> selected, the Properties
sheet displays four propeties: <code>foreground</code>,
<code>background</code>, <code>font</code>, and <code>name</code>.
We declared no properties in <code>SimpleBean</code>
(see the <a href="../properties/index.html"> Properties</a> section to learn 
how to declare properties), so these are properties inherited from
<code>Canvas</code>. Clicking on each property brings up a property
editor. The BeanBox provides default property editors
for the primitive types, plus <code>Font</code> and <code>Color</code>
types. You can find the sources for these property editors in
<code>beans/apis/sun/beans/editors</code>.
 
<p>
Beans communicate with other Beans by sending and
receiving event notifications.
To see which events <code>SimpleBean</code> can send, choose
the Edit|Events BeanBox menu item. A list of events,
grouped by the Java interface in which the event method is
declared, will be displayed. Under each interface
group is a list of event methods. These are all
inherited from Canvas.
 
<p>
You will learn more about 
<a href="../properties/properties.html">properties</a> and
<a href="../events/index.html">events</a> in 
upcoming sections.
</blockquote>
 
<h3><a name=report>Generating Bean Introspection Reports</a></h3>
<blockquote>
<p>
Introspection is the process of discovering a
Bean's design-time features by one of two
methods:
<ul>
  <li>Low-level reflection, which uses design
      patterns to discover your Bean's features
  <li>By examining an associated
      <a href="../beaninfo/index.html"><i>bean information</i></a>
      class that explicitly describes your Bean's features.
</ul>

<p>
You can generate a Bean introspection report
by choosing the the Edit|Report menu item. The
report lists Bean events, properties, and methods,
and their characteristics.

<p>
By default Bean reports are sent
to the <code>java</code> interpreter's standard output, which is the window
where you started the BeanBox. You can redirect the
report to a file by changing the java interpreter
command in <code>beanbox/run.sh</code> or
<code>run.bat</code> to:
<blockquote><pre>
java sun.beanbox.BeanBoxFrame &gt; beanreport.txt
</pre></blockquote>

</blockquote>
<p>

</blockquote>

<img src="../../images/blueline.gif" width="550" height="8" ALIGN="BOTTOM" NATURALSIZEFLAG="3">
<br>
<table width="550">
<tr>
<td align="left" valign="center">
<a href="../beanbox/index.html" target="_top"><img src="../../images/PreviousArrow.gif" width="26" height="26" align="center" border="0" alt="Previous Page"></a>
<a href="../TOC.html#writingbean" target="_top"><img src="../../images/TOCIcon.gif" width="26" height="26" align="center" border="0" alt="Lesson Contents"></a>
<a href="../properties/index.html" target="_top"><img src="../../images/NextArrow.gif" width="26" height="26" align="center" border="0" alt="Next Page"></a></td>

<td align="center" valign="center">
<font size="-1">
<a href="../../index.html" target="_top">Start of Tutorial</a>
&gt;
<a href="../index.html" target="_top">Start of Trail</a>
</font>
</td>

<td align="right" valign="center">
<font size="-1">
<a href="../../search.html" target="_top">Search</a>
<br><a href="../../forms/sendusmail.html">Feedback Form</a>
</font>
</td>

</tr>
</table>
<p>
<font size="-1">
<a href="../../information/copyright.html">Copyright</a>
1995-2002 Sun Microsystems, Inc.  All rights reserved.
</font>
</p>
</body>
</html>

