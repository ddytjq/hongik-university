ID=E0347
URL=http://www.codeguru.com/cpp_mfc/AutoPtr.html
SIZE=30068
DATE=12/07/02
TIME=19:20:07
DATASET=C
HTML=<HTML>
<HEAD>   
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">   
    <META NAME="Author" CONTENT="Tom Archer">
    <TITLE>C++ & MFC - Table of Contents</TITLE>   
    <META Name="description" Content="Source codes with MFC">
    <META Name="keywords" Content="SOURCE CODE MFC">

    <SCRIPT LANGUAGE="JavaScript">
<!--
var axel = Math.random() + "";
var ord = axel * 1000000000000000000 + "?";

//This part of script alleviates a Netscape document.write bug
<!-- 
NS4 = document.layers;
if (NS4) {
origWidth = innerWidth;
origHeight = innerHeight;
}
function reDo() {
if (innerWidth != origWidth || innerHeight != origHeight) 
location.reload();
}
if (NS4) onresize = reDo;
//-->
</SCRIPT>

</HEAD>



<body>

<!-- begin logo and top banner ad table -->

<TABLE width=100% cellpadding="0" cellspacing="0">

  <TR align="left">
    <TD COLSPAN="3" VALIGN="TOP" align="left">
      <A HREF="http://www.earthweb.com" TARGET="_top">
        <IMG SRC="/images/eweb_banner.gif" BORDER="0" ALT="EarthWeb">
      </a>
    </TD>
  </TR>

  <TR>
<!--BljAds
    <TD VALIGN="TOP" align=left>
      <A HREF="/">
        <IMG SRC="/images/logo_cobrand.gif" BORDER="0" ALT="Developer.com">
      </a>
    </TD>

    <TD>
      <img src="/images/dotclear.gif" WIDTH="40" HEIGHT="1">
    </TD>
-->
    <TD align="TOP">
    <center>
      <IFRAME SRC="http://ad.doubleclick.net/adi/N339.Internet.com/B974922;sz=468x60;ord=2002.07.12.18.19.36?" WIDTH=470 HEIGHT=62 MARGINWIDTH=0 MARGINHEIGHT=0 HSPACE=0 VSPACE=0 FRAMEBORDER=0 SCROLLING=no BORDERCOLOR='#000000'>
<SCRIPT language='JavaScript1.1' SRC="http://ad.doubleclick.net/adj/N339.Internet.com/B974922;abr=!ie;sz=468x60;ord=2002.07.12.18.19.36?">
</SCRIPT>
<NOSCRIPT>
<A HREF="http://ad.doubleclick.net/jump/N339.Internet.com/B974922;abr=!ie4;abr=!ie5;sz=468x60;ord=2002.07.12.18.19.36?">
<IMG SRC="http://ad.doubleclick.net/ad/N339.Internet.com/B974922;abr=!ie4;abr=!ie5;sz=468x60;ord=2002.07.12.18.19.36?" BORDER=0 WIDTH=468 HEIGHT=60 ALT="Alt Text">Alt Text</A>
</NOSCRIPT>
</IFRAME><IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/31568/468x60-1/Oracle_RUP_ORA09M_1a/InternetRONBanner468x60.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>

<!-- Counter Position Eliminated -->

    </center>
    </TD>
  </TR>

</TABLE>
<hr>
<!-- end logo and top banner ad table -->

<!-- begin lower outer table -->

<TABLE cellpadding="0" cellspacing="0" border="0">
<TR>
<TD bgcolor=#efefef VALIGN="TOP" WIDTH="90">




<table border=1 cellspacing=0 cellpadding=0>
<tr><td>

<table border=0 cellpadding=5 cellspacing=0 width=150>
   <tr>
     <td align="center">
      <A HREF="/">
        <IMG SRC="/images/logo_cobrand.gif" BORDER="0" ALT="Developer.com">
      </a>
      </td>
   </tr>
   <tr>
     <td align="center">
     <A HREF="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/12159/125x125-1/House_Career_Channel_11g/webopediajobs-125.gif/38366531313035623364326631646230" target="_top"><IMG SRC="http://www.codeguru.com/RealMedia/ads/Creatives/House_Career_Channel_11g/webopediajobs-125.gif"  WIDTH=125 HEIGHT=125 ALT=""  BORDER="0"></A><img src="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/12159/125x125-1/House_Career_Channel_11g/webopediajobs-125.gif/38366531313035623364326631646230?_RM_EMPTY_" Width="1" Height="1" Border="0">
     </td>
   </tr>
</table>

</td></tr>
<tr><td align="center">
  <table width="100%" border=0 cellpadding=5 cellspacing=0><tr><td align="center"><font size=-1>
  <a href="http://www.bizrate.com/mkt.xpml?mkt_id=503249" target="new">Shop for Software</a></font>
  </td></tr></table>
</td></tr>
<tr><td>
  <table width=130 border=0 cellpadding=5 cellspacing=0>
    <tr>
      <td>
        <!-- SEARCH FORM-->
        <form method="post" action="http://search.internet.com/codeguru.earthweb.com">
          <input type="hidden" name="IC_StartNumber" value="0">
          <input type="hidden" name="IC_BatchSize" value="10">
          <input type="hidden" name="IC_RelevanceThreshold" value="30">
          <input type="hidden" name="IC_QueryDatabase"  value="codeguru.earthweb.com">
          <input type="text"   name="IC_QueryText" value="" size="10">
          <input type="submit" value="Search">
        </form>
        <!-- END OF SEARCH FORM -->
      </td>
    </tr>
  </table>

  <table border=0 cellpadding=5 cellspacing=0 width=150>
    <tr><td><span class="navBarH1">CodeGuru Sites</span></td></tr>
    <tr><td nowrap>
        <small>
          <a href="/index.shtml">Visual C++ / MFC / C++</a><br>
          <a HREF="/csharp/index.shtml">.NET (C# and more)</a><br>
          <a href="/vb/index.shtml">Visual Basic</a><br>
          <a href="http://www.gamelan.com">Gamelan (Java)</a><br>
          <a href="http://www.jars.com">JARs (Java Applets)</a><br>
          <hr>
        </small>
        
        
    <a href="/SubmissionsGuidelines.html">
    <font face="verdana, helvetica" color="#000000" size=1>
       submission guidelines
    </font></a>
<br>

<hr>

    </td></tr>


    <tr><td><span class="navBarH1">Interact</span></td></tr>
    <tr><td nowrap>
        <small>
          <a href="/cgi-bin/bbs/wt/wwwthreads.pl">Discussion Boards</a><br>
          <a href="http://e-newsletters.internet.com">Newsletters (subscribe)</a><br>
          <a href="/Guestbook/guestbook.shtml">Guestbook</a><br>
          <a href="/cgi-bin/recommend.cgi">Recommend Us!</a><br>
          <hr>
        </small>
    </td></tr>


    <tr><td><span class="navBarH1">Of Interest</span></td></tr>
    <tr><td nowrap>
        <small>
       <a href="/announcements/dotnetbooks.html">Books on .NET</a><!--<img src="/images/new.gif">--><br>
       <a HREF="/bookReviews/index.shtml">Book Reviews</a><br>
       <a href="/newsletters/index.shtml">Newsletters (archived)</a><br> 
          <a href="/about.shtml">About Us</a><br>
          <hr>
        </small>
    </td></tr>

    <tr><td><span class="navBarH1">Article Sections</span></td></tr>

    <tr><td>
      <span class="navBarH2">C++</span>
      <br>
      <small>
        <a href="/algorithms/index.shtml">algorithms & formulas</a></br>
        <a href="/cpp_mfc/index.shtml">c++ & mfc</a><br>
        <a href="/date_time/index.shtml">date & time</a><br>
        <a href="/string/index.shtml">string</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">COM-based Technologies</span>
      <br>
      <small>
        <a href="/atl/index.shtml">atl & wtl</a><br>
        <a href="/activex/index.shtml">com & activex</a><br>
        <a href="/complus/index.shtml">com+</a><br>
        <a href="/shell/index.shtml">shell programming</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Controls</span>
      <br>
      <small>
        <a href="/buttonctrl/index.shtml">button control  </a><br>
        <a href="/combobox//index.shtml">combobox  </a><br>
        <a href="/editctrl/index.shtml">edit control  </a><br>
        <a href="/imagelist/index.shtml">imagelist control </a><br>
        <a href="/listbox/index.shtml">listbox control  </a><br>
        <a href="/listview/index.shtml">listview control  </a><br>
        <a href="/menu/index.shtml">menu  </a><br>
        <a href="/controls/index.shtml">other controls </a><br>
        <a href="/propertysheet/index.shtml">property sheet  </a><br>
        <a href="/richedit/index.shtml">rich edit control  </a><br>
        <a href="/staticctrl/index.shtml">static control  </a><br>
        <a href="/statusbar/index.shtml">status bar </a><br>
        <a href="/toolbar/index.shtml">toolbar  </a><br>
        <a href="/treeview/index.shtml">treeview control </a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Data</span>
      <br>
      <small>
    <!--
        <a href="/ado/index.shtml">ado & oledb</a><br>
        <a href="/odbc/index.shtml">odbc</a><br>
        <a href="/mfc_database/index.shtml">mfc database classes</a><br>
        <a href="/office_db/index.shtml">office products</a><br>
        <a href="/oracle/index.shtml">oracle</a><br>
        <a href="/serialization/index.shtml">serialization</a><br>
        <a href="/sqlserver/index.shtml">sql server</a><br>
    -->
        <a href="/mfc_database/index.shtml">database</a><br>
        <a href="/data-misc/index.shtml">miscellaneous</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Frameworks</span>
      <br>
      <small>
    <!--
        <a href="/component_frameworks/index.shtml">component frameworks</a><br>
        <a href="/printing_frameworks/index.shtml">printing frameworks</a><br>
        <a href="/ui_frameworks/index.shtml">ui frameworks</a><br>
    -->
        <a href="/advancedui/index.shtml">ui & printing frameworks</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Graphics & Multimedia</span>
      <br>
      <small>
        <a href="/bitmap/index.shtml">bitmaps & palettes</a><br>
        <a href="/directx/index.shtml">directx</a><br>
        <a href="/gdi/index.shtml">gdi</a><br>
        <a href="/multimedia/index.shtml">multimedia</a><br>
        <a href="/opengl/index.shtml">opengl</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Internet & Networking</span>
      <br>
      <small>
        <a href="/ieprogram/index.shtml">ie programming</a><br>
        <a href="/internet/index.shtml">internet protocols</a><br>
        <a href="/isapi/index.shtml">isapi</a><br>
        <a href="/network/index.shtml">network protocols</a><br>
      </small>
    </td></tr>
	
    <tr><td>
      <span class="navBarH2">Miscellaneous</span>
      <br>
      <small>
        <a href="/misc/index.shtml">miscellaneous</a><br>
        <a href="/samples/index.shtml">samples</a><br>
      </small>
    </td></tr>

    <!--
    <tr><td><span class="navBarH2">Security</span></td></tr>
    <tr><td><small>
      <a href="/cryptoapi/index.shtml">crypto api</a><br>
      <a href="/encryption/index.shtml">encryption/decryption</a><br>
      <br>
    </small></td></tr>
    -->

    <tr><td>
      <span class="navBarH2">Visual Studio</span>
      <br>
      <small>
    <!--
        <a href="/addins/index.shtml">add-ins</a><br>

        <a href="/tips/index.shtml">editor tips</a><br>
        <a href="/macros/index.shtml">macros</a><br>
    -->
        <a href="/debug/index.shtml">debugging</a><br>
        <a href="/devstudio_macros/index.shtml">add-ins & macros</a><br>
        <a href="/tips/index.shtml">editor tips</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Windows Programming</span>
      <br>
      <small>
        <a href="/ce/index.shtml">ce</a><br>
        <a href="/clipboard/index.shtml">clipboard</a><br>
        <a href="/dll/index.shtml">dll</a><br>
        <a href="/files/index.shtml">file & folder</a><br>
        <a href="/help/index.shtml">help systems</a><br>
        <a href="/printing/index.shtml">printing</a><br>
        <a href="/win32/index.shtml">win32</a><br>
        <a href="/system/index.shtml">system</a><br>
      </small>
    </td></tr>

    <tr><td>
      <span class="navBarH2">Windows &amp; Dialogs</span>
      <br>
      <small>
        <a href="/console/index.shtml">console</a></br>
        <a href="/dialog/index.shtml">dialog</a><br>
        <a href="/docking/index.shtml">docking window</a><br>
        <a href="/doc_view/index.shtml">doc/view</a><br>
        <a href="/splitter/index.shtml">splitter</a><br>
      </small>
      <hr>
    </td></tr>

    </table>

<!-- JOB BUTTON --> 
    <table border=0 cellpadding=5 cellspacing=0 width=150>
    <tr><td align="center">
       <a href="http://jobs.internet.com" target="new">
         <IMG SRC="http://www.codeguru.com/jobs.gif" alt="[Internet Jobs]">
       </a>
    </td></tr>
    </table>

  </td>
</tr>
</table>

<!--/navbar>


<!-- blank column for spacing -->

<td valign="top" width="20">&nbsp;&nbsp;&nbsp;</td>

<!-- end blank column for spacing -->

<!-- begin content column -->

<TD VALIGN="TOP" >

<!--
<table cellpadding="0" cellspacing="0">
<tr>
-->

<!-- begin main content column -->


<!-- closign of column, row, and table are in subfoot file -->






<link rel="stylesheet" href="../global/global.css">

<CENTER><H3><font COLOR="#AOAO99">

AutoPtr&lt;&gt; Class

</font></H3></CENTER>

<hr>

<p>This article was contributed by 
<a href="mailto:dmitry.leonov@public.mtu.ru">Dmitry Leonov </a>.</p>

<p>
The AutoPtr&lt&gt; class is an extension of std::auto_ptr&lt&gt; template class
from the Standard Template Library. The main purpose of it is to destroy
automatically some dynamically allocated resource (e.g. a memory, but it
may be some other custom resource) after an AutoPtr&lt&gt; object is destroyed.

<p>
<b><em>
Although this class is designed as a safe class that should prevent a resource
leakage in your applications you should _understand_ how does it work
because it has some _unusual_features_ that are not errors but may lead
into big troubles if you are not aware about them. They are described below.
But better explain also the source code, it is not large!
</em></b>

<p>
The Cleanup function is a function that deallocates a resource. This
function has the following prototype:

<pre>
typedef void CLEANUPFXN(void* p);
</pre>

The Cleanup function MUST destroy the allocated resource inside itself in
order to provide the proper class work and correct resource deallocation.
For example it may call a 'delete' operator as an stl::auto_ptr&lt;&gt; destructor
does:

<pre>
void DeleteSingle(void* p)
{
 delete p;
}
</pre>

But it may call a 'delete[]' operator or ::CoTaskMemFree() function or
something else. The meaning of resource cleaning up is fully up to the
programmer that use an AutoPtr&lt;&gt; class. The action should taken for resource
cleaning up depends of the way the used resource is allocated. E.g. if you
use an operator new[] for resource allocation you should use a delete[]
operator in your custom Cleanup function.

Some common Cleanup functions are already provided for you by the author.<br>
They are:
<pre>
::DeleteSingle() - uses a common operator delete,
::DeleteArray() - uses a common operator delete[],
::CloseAcDbObject(),
::AdsRelRb().
</pre>
The two last functions are used in ObjectARX applications for AutoCAD
to close AcDbObject or derived objects and to call ::ads_relrb() function.
These are special functions for AutoCAD user extensions so their part
of code will be included only if the ACRXAPP symbol is #defined.

<p>
Here are examples of AutoPtr&lt;&gt; usage and comments about:

<pre>
#include "autoptr.h"
</pre>

After we leave the block the memory is automatically deallocated because
the ~p1 and ~p2 are called. This is the main advantage of AutoPtr&lt;&gt; usage.
We never obliged to destroy the resource explicitly. This is as more useful
feature as many branches are there in your code from those you can leave
the scope of the explored block.

<pre>
{
 AutoPtr&lt;MyCustomClass, ::DeleteArray&gt; p1(new MyCustomClass[100]);

 <font color=#008000>// Uses ::DeleteSingle() by default.</font>
 AutoPtr&lt;YourCustomClass&gt; p2(new YourCustomClass);

 <font color=#008000>//Here we do something. The syntax of usage p1 and p2 is the common</font>
 <font color=#008000>//C pointer syntax because the operators -&gt; and * are overloaded:</font>
 p1[30]-&gt;MyCustomMethod();
 (*p2).YourCustomMethod();
 p2-&gt;YourCustomMethod2();
}
</pre>

You should avoid assignments of AutoPtr&lt;&gt; objects although the copy costructor
and assignment operator are correctly overloaded. This may lead to
surprising results:

<pre>
{
 <font color=#008000>//p1 will "own" the allocated memory.</font>
 <font color=#008000>//This means p1 will be responsible to memory deallocation.</font>
 AutoPtr&lt;char, ::DeleteArray&gt; p1(new char[100]);
 strcpy(p1, "XXXXXXXXXXXX");

 {
  <font color=#008000>//Now p2 "owns" the memory, p1 is available too:</font>
  AutoPtr&lt;char, ::DeleteArray&gt; p2(p1);    <font color=#008000>//Or p2=p1 that is almost the same.</font>

  <font color=#008000>//The following two calls write to the same memory:</font>
  strcpy(p1, "YYYYYYYYY");  <font color=#008000>//Ok!</font>
  strcpy(p2, "ZZZZZZZZZZZZ");   <font color=#008000>//Ok!</font>

 } <font color=#008000>//~p2, the memory is deallocated here.</font>

 <font color=#008000>//!! Fatal Error - the memory is already deallocated before !!</font>
 strcpy(p1, "HHHHHHHHHHH");
}
</pre>

If you need to use the copy of stored pointer you should do this:
<pre>
{
 <font color=#008000>//p1 will "own" the allocated memory:</font>
 AutoPtr&lt;char, ::DeleteArray&gt; p1(new char[100]);
 strcpy(p1, "XXXXXXXXXXXX");

 {
  char* pChar = p1;

  strcpy(p1, "YYYYYYYYY");      <font color=#008000>//Ok!</font>
  strcpy(pChar, "ZZZZZZZZZZZZ");    <font color=#008000>//Ok!</font>
 } <font color=#008000>//No destructor is called, the memory is still valid.</font>

 strcpy(p1, "NNNNNNNNNNNN"); <font color=#008000>//Ok!</font>

} <font color=#008000>// ~p1. The correct cleaning.</font>
</pre>

You may use AutoPtr&lt;&gt; class if you have a function that returns a pointer
as an argument by a reference or by a pointer. Such a function MAY NOT
initialize a pointer to NULL, but don't worry: the implicitly called
AutoPtr&lt;&gt;::Clear() function initializes it properly.
(See the source code for nuances).

void Fxn1(MyCustomObject*& pMyObject);
void Fxn2(MyCustomObject** pMyObject);

<pre>
{
 AutoPtr&lt;MyCustomObject&gt; pObject;    <font color=#008000>// = NULL, ::DeleteSingle() assumed.</font>

 <font color=#008000>//Gets the first pointer.</font>
 Fxn1(pObject.ByRef( /* bOwn = true */ ));

 <font color=#008000>//Gets the second pointer. The first pointer is</font> 
 <font color=#008000>automatically cleaning.</font>
 Fxn2(pObject.ByPtr( /* bOwn = true */ ));

} <font color=#008000>//~pObject, all is Ok.</font>
</pre>

<pre>
<font color=#008000>//But no resource cleaning will be performed in this case</font>
<font color=#008000>//(this feature is for advanced usage):</font>
{
 AutoPtr&lt;MyCustomObject&gt; pObject;    <font color=#008000>// = NULL, ::DeleteSingle() assumed.</font>

 <font color=#008000>//We receive a pointer but we aren't responsible for</font>
 <font color=#008000>//deleting a received object!</font>
 Fxn1(pObject.ByRef(false));

 if(pObject)
 {
  pObject-&gt;SomeMethod();
 }
}
<font color=#008000>//~pObject, but the memory is not deleted and in this example</font>
<font color=#008000>//it will be lost if Fxn1() returned a newly created object.</font>
</pre>

Here is an another example: working with files.
We usually opens a file calling fopen() and closes it using fclose().
In some cases we may forget to close a file.

<pre>
<font color=#008000>//Now let's write a Cleanup function:</font>
void CloseFileCRT(void* p)
{
 if(NULL != p)
 {
  fclose((FILE*)p);
 }
}

<font color=#008000>//We can now fopen() files and never fclose() them!</font>
{
 AutoPtr&lt;FILE, ::CloseFileCRT&gt; pStream(fopen("somefile.txt", "r"));

 <font color=#008000>//Do something with an open file.</font>

 if(anErrorOccured)
 {
  return;
 }  <font color=#008000>//Don't worry about fclose() - it is automatic!</font>
}   <font color=#008000>//Don't worry about fclose() - it is automatic!</font>
</pre>

The previous list of examples of AutoPtr&lt;&gt; usage is not complete because
I think there are many other ways how you may use this template class.
This is up to your fantasy. I explained the main points only.

<p>
I think there is no meaning in deriving new classes from AutoPtr&lt;&gt;.
If you don't agree with me you shold make the AutoPtr&lt;&gt; destructor
virtual and then derive.

<p>
Here is a complete list of AutoPtr&lt;&gt; public member functions.
See the AutoPtr&lt;&gt; source code to resolve raising questions.

<pre>
<font color=#008000>//A standard constructor.</font>
explicit AutoPtr(TYPE* p = NULL);

<font color=#008000>//A copy constructor. After its usage 'this' object 'inherites</font>
<font color=#008000>//the resource owning' from 'c' object, and 'c' object always</font>
<font color=#008000>//looses the resource owning.</font>
explicit AutoPtr(const AutoPtr& c);

<font color=#008000>//An assignment operator. After its usage 'this' object 'inherites</font>
<font color=#008000>//the resource owning' from 'c' object, and 'c' object always</font>
<font color=#008000>//looses  the resource owning.</font>
AutoPtr& operator=(const AutoPtr& c);

<font color=#008000>//Another assignment operator.</font>
AutoPtr& operator=(TYPE* p);

<font color=#008000>//The destructor.</font>
~AutoPtr();

<font color=#008000>//Type casting.</font>
operator TYPE*() const;

<font color=#008000>//Dereference operator.</font>
TYPE& operator*() const

<font color=#008000>//Logical NOT. Checks a stored pointer for NULL.</font>
operator !() const;

<font color=#008000>//Member selection (pointer). Produces an irksome warning 4284 in VC++.</font>
<font color=#008000>//You may disable this warning using the following line in common include</font>
<font color=#008000>//file StdAfx.h: #pragma warning(disable: 4284)</font>
TYPE* operator-&gt;() const;

<font color=#008000>//Clears the responsibility flag for resource deallocation.</font>
<font color=#008000>//The stored pointer is still valid after this function is used.</font>
<font color=#008000>//This function is NOT relative to COM IUnknown::Release() function!</font>
TYPE* Release() const;

<font color=#008000>//Getting a safe pointer.</font>
TYPE* Get() const;

<font color=#008000>//For functions that take a pointer as an argument by a reference.</font>
<font color=#008000>//STL auto_ptr&lt;&gt; doesn't have this feature.</font>
TYPE*& ByRef(bool bOwns = true);

<font color=#008000>//For functions that take a pointer as an argument by a pointer.</font>
<font color=#008000>//STL auto_ptr&lt;&gt; doesn't have this feature.</font>
TYPE** ByPtr(bool bOwns = true);

<font color=#008000>//Frees the pointer and then initialize class members.</font>
void Clear(bool bOwns = false);

</pre>

<h3>Downloads</h3>
<a href="AutoPtr.zip">Download source (AutoPtr.h) - 2 Kb</a><br>

<h3>History</h3>
Date Posted: January 5, 2000<br>

<!--comments-->
<h3>Comments:</h3><ul>
<!--startlist-->
<li><a href="/mfc/comments/26095.shtml">The new version has been posted at CodeProject site</a> - Dmitry Leonov (2001/09/01)

<li><a href="/mfc/comments/26092.shtml">function objects</a> - andi payn (2001/08/31)

<li><a href="/mfc/comments/15245.shtml">The first (compatible) solution</a> - Dmitry Leonov (2000/05/24)

<li><a href="/mfc/comments/15231.shtml">Class destructor not called</a> - Peter Schregle (2000/05/24)

</ul>
<P>
<strong><a href="/cgi-bin/addpage/addpage.cgi?cfg=addcomment&action=Comment">
Add Comment</a></strong>
<P>

</td>

      <!--BLJAds - Added right side tower ad -->
<TD VALIGN="TOP">
<A HREF="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/25518/125x800/Oracle_RUP_ORA09M_1a/InternetcomRONSky120x600.html/38366531313035623364326631646230?2002.07.12.18.19.36"> <IMG SRC="http://ad.doubleclick.net/ad/N339.Internet.com/B974922.2;sz=120x600;ord=2002.07.12.18.19.36?" BORDER=0 WIDTH=120 HEIGHT=600 ALT=""></A>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/25518/125x800/Oracle_RUP_ORA09M_1a/InternetcomRONSky120x600.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>

<p>

<!-- Commerce bar -->
<table border="0" cellpadding="3" width="140">

<tr bgcolor="black"><td>
<font face="Arial" color="white" size="1" >
<b><center>internet.commerce</center></b></font>
</td></tr>
<tr bgcolor="lightgrey"><td>
<font face="Arial" size="1" >
<a href="http://www.internet.com/partners/">Be a Commerce Partner</A><BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32273/cp1/Digital_River_13b/softwarestore.html/38366531313035623364326631646230">Software Store</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32273/cp1/Digital_River_13b/softwarestore.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>

<BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21352/cp2/LookSurf_2d/FreelanceProjects.html/38366531313035623364326631646230">Freelance Projects</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21352/cp2/LookSurf_2d/FreelanceProjects.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>
<BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/10432/cp3/Access_USA_2d/USAMailingAddress.html/38366531313035623364326631646230">USA Mailing Address</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/10432/cp3/Access_USA_2d/USAMailingAddress.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>
<BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32279/cp4/INB_10a/SendaPressRelease.html/38366531313035623364326631646230">Send a Press Release</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32279/cp4/INB_10a/SendaPressRelease.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>
<BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21359/cp5/Revquest_3d/Revquest_text.html/38366531313035623364326631646230">Web Design</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21359/cp5/Revquest_3d/Revquest_text.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>
<BR>
<A href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/10438/cp6/Domain_Bank_14d/RegisterDomains.html/38366531313035623364326631646230">Register Domains</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/10438/cp6/Domain_Bank_14d/RegisterDomains.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>
<BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32286/cp7/Mamma.com_9d/SearchtheWeb.html/38366531313035623364326631646230">Search the Web</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32286/cp7/Mamma.com_9d/SearchtheWeb.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1><BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21366/cp8/Business_com_2c/BusinessSearch.html/38366531313035623364326631646230">Business Search</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21366/cp8/Business_com_2c/BusinessSearch.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1><BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/10445/cp9/Imici_5c/SecureBusinessIM.html/38366531313035623364326631646230">Secure Business IM</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/10445/cp9/Imici_5c/SecureBusinessIM.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1><BR>
<a href="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32293/cp10/Top_Hosts_13c/tophosts.html/38366531313035623364326631646230">Find a Web Host</a>
<IMG SRC="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/32293/cp10/Top_Hosts_13c/tophosts.html/38366531313035623364326631646230?_RM_EMPTY_" WIDTH=1 HEIGHT=1>
<BR>

</font>
</td></tr>
</table>
<br>


</TD>

</tr>
</table>
<!-- begin footer information -->
<br>
<CENTER>
<A HREF="http://www.codeguru.com/RealMedia/ads/click_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21372/468x60-2/House_Commerce_Partners_4k/commerce750x100.gif/38366531313035623364326631646230" target="_top"><IMG SRC="http://www.codeguru.com/RealMedia/ads/Creatives/House_Commerce_Partners_4k/commerce750x100.gif"  ALT=""  BORDER="0"></A><img src="http://www.codeguru.com/RealMedia/ads/adstream_lx.cgi/ew/ewsoftware/www.codeguru.com/cpp_mfc/AutoPtr.html/21372/468x60-2/House_Commerce_Partners_4k/commerce750x100.gif/38366531313035623364326631646230?_RM_EMPTY_" Width="1" Height="1" Border="0">
<br>
<FONT SIZE="-1">EarthWeb is a service of INT Media Group, Incorporated.<br>
Copyright 2002 INT Media Group, Incorporated. All Rights Reserved.<BR>
<A HREF="http://www.internet.com/help/feedback.html">Feedback</A>, &nbsp;
<A HREF="http://www.itmarketer.com">Advertising Info</A>, &nbsp;
<A HREF="http://www.internet.com/corporate/legal.html">Legal Notices</A>,&nbsp;
<A HREF="http://www.internet.com/corporate/reprints.html#Licensing">Licensing</A>, 
<A HREF="http://www.internet.com/corporate/reprints.html#Reprints">Reprints</A>, &amp; 
<A HREF="http://www.internet.com/corporate/reprints.html#Permissions">Permissions</A>, &nbsp;
<A HREF="http://www.internet.com/corporate/privacy/privacypolicy.html">Privacy Policy</A>.
<BR>
<A HREF="http://www.internet.com"><IMG SRC="/images/internetcom.gif"
ALT="http://www.internet.com/" WIDTH="161" HEIGHT="18"
BORDER="0"></A></FONT>
</CENTER>

</BODY>
</HTML>





