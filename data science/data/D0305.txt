ID=D0305
URL=http://www.absolutejava.com/swing/
SIZE=13004
DATE=16/07/02
TIME=14:42:32
DATASET=Java
HTML=<html>
<head>
<title>Absolute Java - Swing</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="../styles.css" type="text/css">
</head>

<body>
<p class="subtitle" style="margin-top:0px">Modal Dialogs Block Calling Thread</p>
<div class="postSubtitle">When you create a modal <code>Dialog</code> (or <code>JDialog</code>) 
  object, the thread that calls <code>setVisible(true)</code> (or <code>show()</code>) 
  on the <code>Dialog</code> object will block until the dialog is hidden. As 
  usual, Sun's javadoc documentation barely alludes to this behavior. Here's what 
  the javadoc for <code>java.awt.Dialog</code> says about modal dialogs:</div><br>
<p class="quotedText">"A dialog can be either modeless (the default) or modal. A modal dialog is one which blocks input to all other toplevel windows in the application, except for any windows created with the dialog as their owner."</p>
<p>Displaying a modal dialog does indeed block input to all top-level windows. It will also, however, block the thread that calls the <code>setVisible(true)</code> method on the dialog and this fact is <i><b>not documented</b></i> in the javadocs.</p>
<p>The code below creates and displays a modal dialog. When the <code>setVisible(true)</code> call is made to display the dialog on line 32, the main thread is suspended until the dialog is dismissed. You can see this by watching <i><b>when</b></i> the output is generated: line 34 will not be executed until the dialog is dismissed.</p>
<p>The code below also creates another thread in the <code>sillyWorkerThread()</code> method. This thread simply illustrates the fact that not all threads are suspended when a modal dialog is displayed.</p>

<!-- --------------- BEGIN GENERATERD SOURCE CODE CSS TABLE --------------- -->
<!-- ------------------ Generated by www.absolutejava.com ------------------ -->
<table cellspacing='0' class='codeTable'><tr><td class='lineNumber'><pre>1</td><td><pre>&nbsp;<span class='codeKeyword'>import</span> java.awt.*;</td></tr><tr><td class='lineNumber'><pre>2</td><td><pre>&nbsp;<span class='codeKeyword'>import</span> javax.swing.*;</td></tr><tr><td class='lineNumber'><pre>3</td><td><pre>&nbsp;<span class='codeKeyword'>import</span> java.awt.event.*;</td></tr><tr><td class='lineNumber'><pre>4</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>5</td><td><pre>&nbsp;<span class='codeKeyword'>public</span> <span class='codeKeyword'>class</span> Tester <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>6</td><td><pre>&nbsp;   <span class='codeKeyword'>static</span> JFrame mainFrame <span class='codeOperatorLiteral'>=</span> <span class='codeOperatorLiteral'>new</span> JFrame<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"Main Frame"</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>7</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>8</td><td><pre>&nbsp;   <span class='codeKeyword'>public</span> <span class='codeKeyword'>static</span> <span class='codeKeyword'>void</span> main<span class='codeSeparator'>(</span>String<span class='codeSeparator'>[</span><span class='codeSeparator'>]</span> a<span class='codeSeparator'>)</span> <span class='codeKeyword'>throws</span> Exception <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>9</td><td><pre>&nbsp;      mainFrame.getContentPane<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>.add<span class='codeSeparator'>(</span><span class='codeOperatorLiteral'>new</span> JButton<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"Can you press me?"</span><span class='codeSeparator'>)</span>, BorderLayout.CENTER<span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>10</td><td><pre>&nbsp;      mainFrame.setLocationRelativeTo<span class='codeSeparator'>(</span><span class='codeKeyword'>null</span><span class='codeSeparator'>)</span>; <span class='codeComment'>// center the JFrame</span></td></tr><tr><td class='lineNumber'><pre>11</td><td><pre>&nbsp;      mainFrame.pack<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>12</td><td><pre>&nbsp;      mainFrame.setVisible<span class='codeSeparator'>(</span><span class='codeKeyword'>true</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>13</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>14</td><td><pre>&nbsp;      sillyWorkerThread<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>15</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>16</td><td><pre>&nbsp;      <span class='codeComment'>// When this modal dialog is displayed it will block the thread</span></td></tr><tr><td class='lineNumber'><pre>17</td><td><pre>&nbsp;      <span class='codeComment'>// that called setVisible(true).</span></td></tr><tr><td class='lineNumber'><pre>18</td><td><pre>&nbsp;      JDialog dialog <span class='codeOperatorLiteral'>=</span> <span class='codeOperatorLiteral'>new</span> JDialog<span class='codeSeparator'>(</span>mainFrame, <span class='codeStringLiteral'>"AAA"</span>, <span class='codeKeyword'>true</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>19</td><td><pre>&nbsp;      JButton btn <span class='codeOperatorLiteral'>=</span> <span class='codeOperatorLiteral'>new</span> JButton<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"Press AAA"</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>20</td><td><pre>&nbsp;      btn.addActionListener<span class='codeSeparator'>(</span><span class='codeOperatorLiteral'>new</span> ActionListener<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>21</td><td><pre>&nbsp;         <span class='codeKeyword'>public</span> <span class='codeKeyword'>void</span> actionPerformed<span class='codeSeparator'>(</span>ActionEvent evt<span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>22</td><td><pre>&nbsp;            System.out.println<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"AAA Button was pressed, current thread is "</span> <span class='codeOperatorLiteral'>+</span></td></tr><tr><td class='lineNumber'><pre>23</td><td><pre>&nbsp;                               Thread.currentThread<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>.getName<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>24</td><td><pre>&nbsp;         <span class='codeSeparator'>}</span></td></tr><tr><td class='lineNumber'><pre>25</td><td><pre>&nbsp;      <span class='codeSeparator'>}</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>26</td><td><pre>&nbsp;      dialog.getContentPane<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>.add<span class='codeSeparator'>(</span>btn, BorderLayout.CENTER<span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>27</td><td><pre>&nbsp;      dialog.setLocationRelativeTo<span class='codeSeparator'>(</span>mainFrame<span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>28</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>29</td><td><pre>&nbsp;      System.out.println<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"About to display the modal dialog, current thread is "</span> <span class='codeOperatorLiteral'>+</span></td></tr><tr><td class='lineNumber'><pre>30</td><td><pre>&nbsp;                         Thread.currentThread<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>.getName<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>31</td><td><pre>&nbsp;      dialog.pack<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>32</td><td><pre>&nbsp;      dialog.setVisible<span class='codeSeparator'>(</span><span class='codeKeyword'>true</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>33</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>34</td><td><pre>&nbsp;      System.out.println<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"The modal dialog has been displayed, current thread is "</span> <span class='codeOperatorLiteral'>+</span></td></tr><tr><td class='lineNumber'><pre>35</td><td><pre>&nbsp;                         Thread.currentThread<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>.getName<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>36</td><td><pre>&nbsp;      System.out.println<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"The main thread is ending..."</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>37</td><td><pre>&nbsp;   <span class='codeSeparator'>}</span> <span class='codeComment'>// main()</span></td></tr><tr><td class='lineNumber'><pre>38</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>39</td><td><pre>&nbsp;&nbsp;</td></tr><tr><td class='lineNumber'><pre>40</td><td><pre>&nbsp;   <span class='codeKeyword'>private</span> <span class='codeKeyword'>static</span> <span class='codeKeyword'>void</span> sillyWorkerThread<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>41</td><td><pre>&nbsp;      <span class='codeOperatorLiteral'>new</span> Thread<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>42</td><td><pre>&nbsp;         <span class='codeKeyword'>public</span> <span class='codeKeyword'>void</span> run<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>43</td><td><pre>&nbsp;            <span class='codeKeyword'>for</span><span class='codeSeparator'>(</span><span class='codeKeyword'>int</span> i <span class='codeOperatorLiteral'>=</span> <span class='codeIntegerLiteral'>0</span>; i <span class='codeOperatorLiteral'>&lt;</span> <span class='codeIntegerLiteral'>5</span>; <span class='codeOperatorLiteral'>++</span>i<span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>44</td><td><pre>&nbsp;               System.out.println<span class='codeSeparator'>(</span><span class='codeStringLiteral'>"i="</span> <span class='codeOperatorLiteral'>+</span> i<span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>45</td><td><pre>&nbsp;               <span class='codeKeyword'>try</span> <span class='codeSeparator'>{</span></td></tr><tr><td class='lineNumber'><pre>46</td><td><pre>&nbsp;                  Thread.sleep<span class='codeSeparator'>(</span><span class='codeIntegerLiteral'>1000</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>47</td><td><pre>&nbsp;               <span class='codeSeparator'>}</span> <span class='codeKeyword'>catch</span><span class='codeSeparator'>(</span>InterruptedException e<span class='codeSeparator'>)</span> <span class='codeSeparator'>{</span><span class='codeSeparator'>}</span></td></tr><tr><td class='lineNumber'><pre>48</td><td><pre>&nbsp;            <span class='codeSeparator'>}</span></td></tr><tr><td class='lineNumber'><pre>49</td><td><pre>&nbsp;         <span class='codeSeparator'>}</span> <span class='codeComment'>// run()</span></td></tr><tr><td class='lineNumber'><pre>50</td><td><pre>&nbsp;      <span class='codeSeparator'>}</span>.start<span class='codeSeparator'>(</span><span class='codeSeparator'>)</span>;</td></tr><tr><td class='lineNumber'><pre>51</td><td><pre>&nbsp;   <span class='codeSeparator'>}</span> <span class='codeComment'>// sillyWorkerThread()</span></td></tr><tr><td class='lineNumber'><pre>52</td><td><pre>&nbsp;<span class='codeSeparator'>}</span> <span class='codeComment'>// Tester</span></td></tr></table>
<!-- --------------- END GENERATERD SOURCE CODE HTML TABLE --------------- -->


<p>&nbsp;</p><div align="center" style="font-size:9pt; font-family:verdana,arial,helvetica; color: black">
    Copyright &copy; 1999-2002, Tony LaPaso<br>
    All Rights Reserved.
</div>
</body>
</html>

