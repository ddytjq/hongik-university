ID=D0757
URL=http://www.javaworld.com/javaworld/jw-12-2001/jw-1228-letters.html
SIZE=44734
DATE=16/07/02
TIME=14:57:19
DATASET=Java
HTML=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title> Letters to the Editor</title>
<!-- ssilog 7814 -->
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
<meta name="keywords" content="
">
<meta name="description" content="
In this month's letters, David Geary expounds further on the Decorator pattern, Humphrey Sheil defends EJB performance, and Jeff Friesen talks more trash.  (2,000 words; December 28, 2001)
">
<meta name="date" content="2001-12-28">
<META NAME="DC.Date" CONTENT="2001-12-28">
<basefont face="verdana, arial, helvetica" size="3" />
<style type="text/css">
            code {font-size: 90%; font-family: monospace;}
            pre {font-size: 90%; font-family: monospace;}
            td {font-size: 90%;}
</style>
<script language="javascript">
<!--// IDG.net Scripts
            function mail2Friend () {
                window.parent.location = "/MailToFriend?url=" + escape(document.location);
            }

            function openBrWindow() {
                win=window.open("http://www.javaworld.com/channel_content/jw-story-feedback.shtml",'Feedback','width=600,height=330,toolbar=no,location=no,directories=no,menubar=no,scrollbars=yes,resizable=yes');
            }
            //-->
        </script>
    </head>
<body bgcolor="#ffffff" text="#000000" link="#990033" vlink="#990033" alink="#990033" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" marginheight="0" marginwidth="0">
<table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td colspan="2" width="186" bgcolor="#006699"><a href="http://www.javaworld.com"><img height=81 src="http://www.javaworld.com/images/top_jwlogo.gif" width=186 border=0 ></a></td>
                <td bgcolor="#cccccc" width="100%" align="middle" valign="center"><!-- START TOP 468x60 BANNER -->
<TABLE CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
<TD>
<FONT COLOR="#000000" SIZE="-2" FACE="Arial,Helvetica,Sans-serif">
Advertisement: Support JavaWorld, click here!</FONT><BR>
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=top;sz=468x60;tile=1;ord=687468?" width="468" height="60" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=top;sz=468x60;tile=1;ord=687468?"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;pos=top;sz=468x60;tile=1;ord=687468?" border="0" height="60" width="468"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer1" visibility="hidden" width=468 height=60></ILAYER>
</TD>
</TR>
</TABLE>
<!-- END TOP 468x60 BANNER --></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td bgcolor="#006699" width="160"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=160 border=0 ></td>
                <td width="26" valign="top" align="left" bgcolor="#ffffff"><img height=8 src="http://www.javaworld.com/images/c_whtbottom.gif" width=8 border=0 ></td>
                <td width="100%"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ><IMG SRC="http://ad.doubleclick.net/ad/idg.pixel.global/idgpixel7.18.00;sz=1x1;ord=687468?" border=0 height="1" width="1"><IMG SRC="http://ad.doubleclick.net/ad/idg.pixel.usa.jw/usajw.081501;sz=1x1;ord=687468?" border=0 height="1" width="1"></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td bgcolor="#006699" width="160" align="middle" valign="center" nowrap><nobr><font face="Verdana, Arial, Sans-serif" color="#ffffff" size="2">December 2001</font></nobr><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=160 border=0 ></td>
                <td width="8"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
                <td bgcolor="#006699" width="8" valign="top"><img height=8 src="http://www.javaworld.com/images/c_bltlft.gif" width=8 border=0 ></td>
                <td bgcolor="#006699" width="100%" align="middle" valign="center">    <table width="100%" border="0" cellspacing="0" cellpadding="5">
        <tr>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">HOME</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/features/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">FEATURED TUTORIALS</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/columns/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">COLUMNS</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/news-reviews/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">NEWS & REVIEWS</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://forums.idg.net/webx?13@@.ee6b802"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">FORUM</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/resources/index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">JW RESOURCES</font></a></td>
            <td align="middle" bgcolor="#006699"><a href="http://www.javaworld.com/info/jw-about-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">ABOUT JW</font></a></td>
        </tr>
    </table></td>
                <td bgcolor="#006699" width="8" align="right" valign="top"><img height=8 src="http://www.javaworld.com/images/c_bltrt.gif" width=8 border=0 ></td>
                <td width="8"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr valign="top">
                <td bgcolor="#006699" width="160" align="middle" valign="top">
                    <table width="160" border="0" cellspacing="0" cellpadding="0" bgcolor="#006699" summary="">
                        <tr>
                            <td width="8"><img alt="" height="1" src="http://www.javaworld.com/images/spacer.gif" width="8" /></td>
                            <td align="center">
                                <form action="http://www.javaworld.com/isearch" method="GET" name="search">
                                    <img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="2" /><br /><br />
                                    <input type="text" name="qt" size="12" maxlength="2047" /><br />
                                    <input type="image" value="search" src="http://www.javaworld.com/images/button_blue.gif" border="0" width="97" height="18" alt="GO" /><br />
                                    <input type="hidden" name="site" value="javaworld"><br />
                                   <!-- <a href="http://www.google.com/"><img src="http://www.javaworld.com/images/google-power-fp.gif" width="108" height="45" border="0" alt="Google.com"></a>-->
                                    <input type="hidden" name="ms" value="1">
                                    <input type="hidden" name="tid" value="1">
                                    <input type="hidden" name="st" value="1">
                                    <input type="hidden" name="rf" value="0">
                                   
                                </form>
                            </td>
                            <td width="8"><img alt="" height="1" src="http://www.javaworld.com/images/spacer.gif" width="8" /></td>
                        </tr>
                        <tr>
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                            <td><img height=1 alt="" src="http://www.javaworld.com/images/rule_ltblue.gif" width=144 vspace=2 ><br>
                                <a href="http://www.javaworld.com/archives/index-year.html"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff"><strong>ARCHIVE</strong></font></a><br>
                                <img height=1 alt="" src="http://www.javaworld.com/images/rule_ltblue.gif" width=144 vspace=2 ><br>
                                <strong><a href="http://www.javaworld.com/channel_content/jw-topical-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff">TOPICAL INDEX</font></a></strong></font><br><table cellspacing="0" cellpadding="0" border="0" summary="">
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a  href="http://www.javaworld.com/channel_content/jw-core-index.shtml"><font color="#ffffff">Core Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-enterprise-index.shtml"><font color="#ffffff">Enterprise Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-micro-index.shtml"><font color="#ffffff">Micro Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-applied-index.shtml"><font color="#ffffff">Applied Java</font></a></strong></font></td>
                        </tr>
                        <tr>
                            <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /></td>
                            <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/channel_content/jw-community-index.shtml"><font color="#ffffff">Java Community</font></a></strong></font><br /></td>
                        </tr>
                    </table><img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="2" /><br /> <a href="http://www.javaworld.com/columns/jw-qna-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff"><strong>JAVA Q&A INDEX</strong></font></a><br /><img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="2" /><br /> <a href="http://www.javaworld.com/columns/jw-tips-index.shtml"><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#ffffff"><strong>JAVA TIPS INDEX</strong></font></a><br /> <img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="8" /><br /><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2" color="#CCCCCC"><strong>JavaWorld Services</strong></font><br /><img alt="" height="4" src="http://www.javaworld.com/images/spacer.gif" width="1" border="0" /><table cellspacing="0" cellpadding="0" border="0" summary=""><tr><td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /><br /><img alt="" height="7" src="http://www.javaworld.com/images/spacer.gif" width="1" border="0" /></td><td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a href="http://www.javaworld.com/subscribe"><font color="#ffffff">Free JavaWorld newsletters</font></a></strong></font></td></tr><tr><td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /><br /></td> <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a  href="http://javaworld.pricegrabber.com"><font color="#ffffff">ProductFinder </font></a></strong></font></td></tr><tr> <td><img alt="" height="7" src="http://www.javaworld.com/images/arrow_closed.gif" width="8" border="0" /><br /></td> <td><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1"><strong><a  href="http://www.javaworld.com/white-paper/index.shtml"><font color="#ffffff">White Paper Library</font></a></strong></font></td></tr>
</table>
<img alt="" height="1" src="http://www.javaworld.com/images/rule_ltblue.gif" width="144" vspace="8" /><br />
</td>
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                        </tr>
                        <tr valign="bottom">
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                            <td> </td>
                            <td width="8"><img height=8 alt="" src="http://www.javaworld.com/images/c_gryblbottom.gif" width=8 ></td>
                        </tr>
                        <tr>
                            <td width="8" bgcolor="#cccccc"> </td>
                            <td bgcolor="#cccccc"> </td>
                            <td width="8" bgcolor="#cccccc"> </td>
                        </tr>
                        <tr>
                       <td width="8" bgcolor="#cccccc"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                           <td align="middle" bgcolor="#cccccc"><!-- SKYSCRAPER AD START HERE -->
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=skyscraper;sz=120x600;tile=3;ord=687468?" width="120" height="600" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=skyscraper;sz=120x600;tile=3;ord=687468?"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;skyscraper=med;sz=120x600;tile=3;ord=687468?" border=0 height="600" width="120"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer3" visibility="hidden" width=120 height=600></ILAYER>
<!-- SKYSCRAPER AD ENDS HERE -->
</td>
                       <td width="8" bgcolor="#cccccc"><img height=8 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8></td>
                        </tr>
                        <tr>
                            <td width="8" bgcolor="#cccccc"> </td>
                            <td bgcolor="#cccccc"> </td>
                            <td width="8" bgcolor="#cccccc"> </td>
                        </tr>
                        <tr valign="top">
                            <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                            <td> </td>
                            <td width="8"><img height=8 alt="" src="http://www.javaworld.com/images/c_grybltop.gif" width=8 ></td>
                        </tr>
                    </table>
                    <img height=8 src="http://www.javaworld.com/images/spacer.gif" width=160 border=0 ></td>
                    <td width="8"><img height=1 alt="" src="http://www.javaworld.com/images/spacer.gif" width=8 ></td>
                <td width="100%">
                    <!-- ## MAIN CONTENT STARTS HERE ### -->
                    <font face="verdana, arial, helvetica" size="3">
                        <strong></strong>
                        <p>
                            <h1 align="CENTER"> Letters to the Editor</h1>
                            <h3 align="CENTER"> Humphrey Sheil defends EJB performance, and Jeff Friesen talks more trash </h3>
                        </p>
                        <!--<BLOCKQUOTE><STRONG>Summary</STRONG><BR>-->
                        <BLOCKQUOTE>
<STRONG>Summary</STRONG><BR>

In this month's letters, David Geary expounds further on the Decorator pattern, Humphrey Sheil defends EJB performance, and Jeff Friesen talks more trash.  (<em>2,000 words;</em> <strong>December 28, 2001</strong>)
</BLOCKQUOTE>
                        <!--</BLOCKQUOTE>-->
                        <a href="http://www.javaworld.com/feedback" target="Feedback"></a>
                        <p><img src="http://www.javaworld.com/images/rule_ltblue.gif" width="100%" height="2"><br />
                           <img src="http://www.javaworld.com/images/jw-print-icon.gif" width="16" height="15" border="0" alt="Printer-friendly version" vspace="4" align="absmiddle" />
                           <a href="/javaworld/jw-12-2001/jw-1228-letters_p.html">Printer-friendly version</a> | <img src="http://www.javaworld.com/images/jw-email-icon.gif" width="20" height="15" border="0" alt="Send this article to a friend"> <a href="javascript:mail2Friend()">Mail this to a friend</a></p>
                        <p><br /></p>
                         <font size=-1>  <!-- REPLACE PAGECOUNT --></font>
                        <p><!-- START BIG AD (336x280) -->
<table align="right" border="0" cellpadding="0" cellspacing="0"><tr valign="bottom" align="center"><td><font face="verdana, arial, geneva, sans-serif" color="#999999" size="-2">Advertisement</font></td></tr><tr><td><table border=1 bordercolor="#cccccc" cellspacing="5" cellpadding="0"><tr><td>
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=rectangle;sz=336x280;tile=5;ord=687468" width="336" height="280" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=rectangle;sz=336x280;tile=5;ord=687468"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;pos=rectangle;sz=336x280;tile=5;ord=687468" border=0 height="280" width="336"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer5" visibility="hidden" width=336 height=280></ILAYER>
</td></tr></table></td></tr></table>
<!-- END BIG AD (336x280) --></p>
                        <p><P>
<font color="#336699" face="Arial,Helvetica,Sans-serif"><strong>Java Design Patterns</strong><br /></font> <strong><font size="+1">"<a href="http://www.javaworld.com/javaworld/jw-12-2001/jw-1214-designpatterns.html?">Decorate your Java code</a>"</font></a></strong><br /> <em>David Geary</em> <P>
<STRONG> Decorator pattern compares to composition/delegation </STRONG><P><P>
David, <P>
Decorators are a form of a dynamic inheritance system, but with normal object-oriented inheritance, no matter where a method is implemented in a hierarchy, <code>this</code> always refers to the same object. With normal Decorators, however, once a call is passed on, the wrapped object doesn't know about the original object. It's as if the super method call forgot who <code>this</code> was. <P>
There's an almost convenient mechanism to solve this problem: have two versions of each method, one with an extra parameter representing the effective <code>this</code>, which I call the <em>target.</em> The short form of each method just calls the expanded form with the current <code>this</code> as the target. Automatic design patterns via proxies can be made to look for expanded methods and pass in the proper target object. <P>
Tom <P>
<FONT COLOR="#006600"> Tom, <P>
That's a good point. Instead of comparing Decorators to inheritance, it's more appropriate to compare the more general techniques of composition or delegation, which you describe, to inheritance. <P>
Decorators use object composition by forwarding method calls to an enclosed object. It's called composition because the enclosed object does not have access to its enclosing object -- that is, to the <code>this</code> reference you discuss. <P>
Delegation resembles composition, except in that the enclosing object passes a reference to itself to the enclosed instance. There are a number of ways for the enclosing object to make itself known to the enclosed object; you describe one of them. <P>
For the Decorator pattern, composition is used instead of delegation, because delegation requires the enclosed object to be aware of its enclosing object. One of the Decorator pattern's main attractions is that enclosed objects (and the objects that use the Decorators) are oblivious to Decorators. For example, in one of the examples discussed in my article, table models are unaware of the sorters that decorate them, so any table model can be sorted. <P>
David Geary </FONT> <P>
<strong><font size="+1">"<a href="http://www.javaworld.com/javaworld/jw-12-2001/jw-1207-yesnoejb.html">To EJB, or not to EJB</a>"</font></strong><br> <em>Humphrey Sheil</em><br> <P>
<STRONG> Aren't EJBs slower than servlets and JSPs? </STRONG><P><P>

Humphrey,
<P>
One disadvantage of EJBs (Enterprise JavaBeans) that you didn't mention is that EJBs are much slower than straight servlets or JSPs (JavaServer Pages). Sure, EJBs run great on a 50-processor Solaris box, but what about on a quad Intel? Everyone who I have spoken to that has implemented EJBs says they are extremely slow. <P>
Ryan Ackley  <FONT COLOR="#006600"> <P>
Ryan, <P>
To be blunt, you need to perform your own investigation. You are falling prey to the standard "EJBs are slow" fallacy. EJBs are not slower than alternative approaches, given the added benefits they bring, which I list in the article. <P>
You say that EJBs are "much slower than straight servlets or JSPs." You aren't comparing like to like here. JSPs are designed for presentation logic; a creative designer should be able to work with JSPs as if they were straight HTML. Ideally, a JSP should have no Java code; it should be hidden inside taglibs. <P>
Servlets, which were the precursors of JSP technology, are more suited for control/navigation tasks (see the Model 2 architecture for more details). <P>
When you boil it all right down, applications with low/middle complexity and requirements can usually be architected successfully using a JSP/servlet paradigm, not with EJBs. <P>
I'm willing to bet that you will be pleasantly surprised by the performance achievable with Orion, JBoss, and others on a quad-Intel box if you invest a small amount of time building a meaningful, correctly designed prototype of your target application -- assuming you need to use EJBs at all. <P>
Humphrey Sheil  </FONT> <P>
<STRONG> How will JDO affect EJBs? </STRONG><P><P>

Humphrey, <P>
What about JDO (Java Data Objects)? Will JDO mean additional alternative approaches? Will plain JDO be EJB friendly? <P>
Sometimes you have the same piece of business logic in a single-user application, which uses a local database, and in a workgroup or enterprise application. How do you implement this business logic as reusable code? I call that a <em>personal edition problem.</em> Are there solutions that are better than plain JDBC (Java Database Connectivity) or custom framework? <P>
A typical single-user application is an editor of some document -- a business plan, say. An enterprise application can manage the same document type. If one department needs only a single-user application and another department needs an enterprise application, you might force both departments to use the enterprise application. But if a customer needs just a single-user application, you shouldn't force him to build an enterprise solution. <P>
Nebojsa Vasiljevic
<P>
<FONT COLOR="#006600"> Nebojsa,
<P>
From my limited knowledge of JDO, I would say that if JDO becomes part of the J2EE platform, it would affect container developers more than it would application developers. From a JDO <a href="http://java.sun.com/products/jdbc/related.html#6">FAQ</a>: <P>
<blockquote> <strong>How will JDO affect the EJB technology?</strong><br /> JDO is a suitable implementation (1) for persistent helper classes for Session Beans, (2) as delegate classes for Bean Managed Persistence Entity Beans, and (3) for delegate classes for Container Managed Persistence Entity Beans. </blockquote> <P>
Regarding the personal edition problem: Judicious use of design patterns would help; perhaps you could use a Factory, for example, that creates different types of wrappers for workers depending on the environment. The Factory can then delegate to a common business logic implementation for both the personal and enterprise editions. <P>
Humphrey Sheil </FONT> <P>
<font color="#336699" face="Arial,Helvetica,Sans-serif"><strong>Java 101</strong></font><br /> <strong><font size="+1">"<a href="/javaworld/jw-12-2001/jw-1207-java101.html">Trash talk, Part 1</a>"</font></strong><br> <em>Jeff Friesen </em><br> <P>
<STRONG> When do you run System.gc()? </STRONG><P><P>

Jeff,
<P>
You cautioned against running <code>System.gc()</code> right after <code>System.runFinalization()</code>. Well, when I ran your example (<code>FinalizeDemo3</code>), I didn't see <code>System.runFinalization()</code> do anything at all. If you comment it out and just run <code>System.gc()</code>, the method works fine. On the other hand, if you comment out <code>System.gc()</code> and run <code>System.runFinalization()</code> by itself, it doesn't do anything -- at least on my Java HotSpot Client VM (build 1.3.1_01, mixed mode). It appears that <code>runFinalization()</code> never calls an object's finalize method! Any ideas? <P>
Bill <P>
<FONT COLOR="#006600"> <P>
Bill, <P>
While writing "Trash Talk, Part 1," I performed quite a few experiments with <code>FinalizeDemo3</code>.  Basically, I experimented with just <code>System.gc()</code> at the end of the <code>main()</code> method; with just <code>System.runFinalization()</code> at the end of <code>main()</code>; and with combinations of those method calls at the end of <code>main()</code>.  The only situation in which all finalizers were consistently called was the combination of method calls where <code>System.gc()</code> precedes <code>System.runFinalization()</code>.  Incidentally, if you were to call <code>System.runFinalization()</code> in a loop (and not call <code>System.gc()</code> anywhere), you would occasionally notice that all <code>finalize()</code> methods are called. However, if you call <code>System.runFinalization()</code> only once, you typically do not notice all <code>finalize()</code> methods being called.  This has to do with the asynchronous nature of the garbage collector. <P>
To understand how <code>System.runFinalization()</code> works, you need to understand the Reference Objects API (in package <code>java.lang.ref</code>) and threads. Because <strong>Java 101</strong> has not yet explored those topics, I chose not to provide a detailed look at <code>System.runFinalization()</code> and finalization's inner workings. (I plan to explore those topics in a future article -- when I explore threads.)  For now, here are a few points about <code>System.runFinalization()</code> and the finalization process, in case you wish to do some exploring: <P>
<ol> <li><code>System.runFinalization()</code> calls <code>Runtime.getRuntime().runFinalization()</code>.</li> <P>
<li><code>Runtime.getRuntime().runFinalization()</code> calls <code>runFinalization0()</code> -- a private method in class <code>Runtime</code>.</li> <P>
<li><code>runFinalization0()</code> is a native method that results in a call to the <code>runFinalization()</code> method in the <code>java.lang.ref.Finalizer</code> class.</li> <P>
<li>It appears that the garbage collector creates <code>Finalizer</code> objects for objects with overridden <code>finalize()</code> methods and queues those objects prior to finalization.</li> <P>
<li><code>Finalizer</code> contains a <code>runFinalizer()</code> method that (indirectly, through the native <code>invokeFinalizeMethod()</code> method) actually finalizes the objects stored in a queue.  That method is called either from a background thread created when <code>Finalizer</code> loads (known as a primary finalizer) or from a thread created when <code>Finalizer</code>'s <code>runFinalization()</code> method is called (known as a secondary finalizer, which prevents deadlock among threads) from <code>Runtime</code>'s <code>runFinalization0()</code> method. (Thread scheduling determines when these threads run.)</li> </ol> <P>
I realize this response does not completely answer your question.  However, a detailed explanation is beyond this letter's scope and would constitute an article unto itself.  For that reason, I plan to explore finalization (from a threading perspective) in a future article. <P>
Jeff Friesen <P>
P.S. The information I've provided is based on the Java 2 Platform, Standard Edition 1.4 Beta 2. </FONT> <P>
<strong><font size="+1">"<a href="http://www.javaworld.com/javaworld/jw-07-2001/jw-0727-templates.html">Take the fast track to text generation</a>"</font></strong><br> <em>Leon Messerschmidt </em><br> <P>
<STRONG> Can JSP take you down the fast track too? </STRONG><P><P>
Leon, <P>
Your solution is clean and elegant, but I am curious as to whether you could accomplish the same thing -- as far as the customized email generation you started off with -- using regular JSPs (JavaServer Pages). That is, is there some way to ask a JSP engine (let's say Tomcat) to compile and run a JSP based on what's in the session, and put the output into a string rather than sending it to a waiting browser? <P>
While I appreciate Velocity's strengths, it seems I should be able to do these tasks without it if I choose to, but I can't find such an API anywhere. Can you offer some direction? <P>
Moshe Sambol
<P>
<FONT COLOR="#006600"> Moshe, <P>
Unfortunately, there is no easy way for JSPs to be used like Velocity.  A JSP engine (Tomcat, Resin, etc.) compiles the JavaServer Page into a Java servlet.  This servlet has to run in a servlet container. <P>
I haven't done this myself, but you could probably use Tomcat to compile a JavaServer Page into a servlet, and then write some code that mimics a servlet engine.  In other words, the code creates a servlet instance and passes request/response objects but, instead of sending output to a browser, it traps the output as text. <P>
That is the best solution I can think of, and I doubt there is a much simpler one.  That is one of the reasons why Velocity exists in the first place. <P>
Leon Messerschmidt <P>
</FONT> <font color="#336699" face="Arial,Helvetica,Sans-serif"><strong> Tips 'N Tricks</strong><br /></font> <strong><font size="+1">"<a href="http://www.javaworld.com/javaworld/javatips/jw-javatip96.html">Java Tip 96: Use HTTPS in your Java client code</a>"</font></strong><br> <em>Matt Towers </em><br> <P>
<STRONG> JSSE not part of the standard SDK </STRONG><P><P>
Matt,
<P>
I saw your article and made the necessary changes to my program, but I keep getting the following error.
<P>
My program: <CODE><P>
import java.net.*;<BR>

import java.io.*;<BR>

import java.security.*;<BR>

<BR>

public class URLReaderorg<BR>

{<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void main(String[] args) throws Exception<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>

<BR>

<BR>

System.setProperty("java.protocol.handler.pkgs","com.sun.net.ssl.internal.www.protocol");<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Need to add the Security Provider to use SSL<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; java.security.Security.addProvider( new<BR>

com.sun.net.ssl.internal.ssl.Provider());<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URL yahoo = new URL("https://ibank.amsouth.com");<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BufferedReader in = new BufferedReader(new<BR>

InputStreamReader(yahoo.openStream()));<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String inputLine;<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; File outputFile = new File("output.html");<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FileWriter out = new FileWriter(outputFile);<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ((inputLine = in.readLine()) != null)<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write(inputLine);<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write('\n');<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>

<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; in.close();<BR>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.close();<BR>

&nbsp;&nbsp;&nbsp;&nbsp;}<BR>

}<BR>
</CODE><P>
And this is the error I receive: <CODE><P>
Exception in thread "main" java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider<BR>
</CODE><P>
Ashwin Philar <P>
<FONT COLOR="#006600"> <P>
Ashwin, <P>
With the advent of JDK 1.4, the JSSEs (Java Secure Socket Extensions) mentioned in my article were merged into the standard JDK. You can find more information here:
<P>
<ul><li><a href="http://java.sun.com/products/jsse/index-14.html">http://java.sun.com/products/jsse/index-14.html</a></li><li><a href="http://java.sun.com/j2se/1.4/docs/guide/security/jsse/JSSERefGuide.html#WhatsNew">http://java.sun.com/j2se/1.4/docs/guide/security/jsse/JSSERefGuide.html#WhatsNew</a></li></ul> <P>
In particular, the classes in the JSSE package that were under the <code>com.sun.*</code> hierarchy have moved into a <code>javax.net.*</code> hierarchy. Therefore, if you are using JDK 1.4 and have not explicitly installed the older JSSE package, the provider I used in my sample code will not be found.  It appears that the preferred method for acquiring an SSL (Secure Socket Layer) has been updated to use the new <code>javax.net.ssl.SSLContext.getProvider()</code> method. <P>
Alternately, you might want to look at the new <code>javax.net.ssl.HttpsURLConnection</code> class.  It derives from the familiar <code>HttpURLConnection</code> and might wrap this functionality for you. This means that you may not need to use any code from my sample. <P>
Matt Towers </FONT> <P>
<strong><font size="+1">"J2SE 1.4 premieres Java's assertion capabilities"</font></strong><br> <a href="http://www.javaworld.com/javaworld/jw-11-2001/jw-1109-assert.html">Part 1: Understand the mechanics of Java's new assertion facility</a><br /> <a href="http://www.javaworld.com/javaworld/jw-12-2001/jw-1214-assert.html?">Part 2: Understand the methodology impact of Java's new assertion facility</a> <br /> <em> Wm. Paul Rogers </em><br> <P>
<STRONG> RuntimeExceptions should never be put after the method definition </STRONG><P><P>
Paul,
<P>
A little point from <a href="http://www.amazon.com/exec/obidos/ASIN/0201310058/javaworld"><em>Effective Java</em></a> by Joshua Block (Addison Wesley Professional, 2001; ISBN: 0201310058): <code>RuntimeException</code>s should never be put after the method definition (i.e., no <code>myMethod()</code> throws <code>IllegalArgumentException</code> as in your example). Only checked exceptions should be placed after the method so that the client can separate the checked/unchecked exceptions in the generated Javadoc. In both cases, though, the <code>@throws</code> should be specified. <P>
Janne Nyk&auml;nen
<FONT COLOR="#006600"> <P>
Janne, <P>
Thanks for your message. Your point is well taken, and I would not include an <code>IllegalArgumentException</code> declaration in real code. For the article sample code, however, I wanted an exact parallel between the method throwing the unchecked <code>IllegalArgumentException</code> and the one throwing the checked <code>SensorException</code>, so I put the <code>throws</code> declaration in both -- since the latter requires it. Yes, I could simply have dropped the <code>throws</code> declaration from the first method, but I specifically wanted symmetry. Perhaps I could have warned against the general use of declaring unchecked exceptions in the method header, but such warning would, I believe, have sidetracked the discussion. <P>
I'm an <em>Effective Java</em> fan and appreciate your note on my violation of Bloch's guidelines. <P>
Wm. Paul Rogers </FONT> <br /></p>
                        <font size=-1><!-- REPLACE PAGEURLS --> </font>
                        <p>
                            <img src="http://www.javaworld.com/images/jw-print-icon.gif" width="16" height="15" border="0" alt="Printer-friendly version" vspace="4" align="absmiddle" />
                            <a href="/javaworld/jw-12-2001/jw-1228-letters_p.html">Printer-friendly version</a> | <img src="http://www.javaworld.com/images/jw-email-icon.gif" width="20" height="15" border="0" alt="Send this article to a friend"> <a href="javascript:mail2Friend()">Mail this to a friend</a></p>
                        <p><br /></p>
                        <p><ul></ul><br /></p>
                        <!-- REPLACE SIDEBAR -->
                    </font>
                    <!-- ## MAIN CONTENT ENDS HERE ### -->
                </td>
                <td width="8"><img height=1 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td bgcolor="#006699" width="168" nowrap><nobr><img src="http://www.javaworld.com/images/spacer.gif" width=160 height=8 border=0 ><img src="http://www.javaworld.com/images/c_bllftbottom.gif" width=8 height=8 border=0 ></nobr></td>
                <td width="100%"><img src="http://www.javaworld.com/images/spacer.gif" width=1 height=1 border=0 ></td>
                <td width="8"><img src="http://www.javaworld.com/images/spacer.gif" width=8 height=8 border=0 ></td>
            </tr>
        </table>
        <table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td width="186" bgcolor="#006699" align="middle"><nobr><font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="2"></font></nobr><a href="http://www.javaworld.com"><img height=81 src="http://www.javaworld.com/images/top_jwlogo.gif" width=186 border=0></a></td>
                <td bgcolor="#cccccc" width="8" valign="bottom"><img height=8 src="http://www.javaworld.com/images/c_blgrylftbottom.gif" width=8 border=0 ></td>
                <td bgcolor="#cccccc" width="100%" align="middle" valign="center"><!-- BOTTOM 468x60 AD STARTS HERE -->
<TABLE CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
<TD>
<FONT COLOR="#000000" SIZE="-2" FACE="Arial,Helvetica,Sans-serif">
Advertisement: Support JavaWorld, click here!</FONT><BR>
<NOLAYER>
<IFRAME SRC="http://ad.doubleclick.net/adi/idg.us.idgnet.javaworld/articles;pos=bottom;sz=468x60;tile=4;ord=687468?" width="468" height="60" frameborder="no" border="0" MARGINWIDTH="0" MARGINHEIGHT="0" SCROLLING="no">
<A HREF="http://ad.doubleclick.net/jump/idg.us.idgnet.javaworld/articles;abr=!ie;pos=bottom;sz=468x60;tile=4;ord=687468?"><IMG SRC="http://ad.doubleclick.net/ad/idg.us.idgnet.javaworld/articles;abr=!ie;pos=bottom;sz=468x60;tile=4;ord=687468?" border=0 height="60" width="468"></A>
</IFRAME>
</NOLAYER>
<ILAYER id="layer4" visibility="hidden" width=468 height=60></ILAYER>
</TD>
</TR>
</TABLE>
<!-- BOTTOM 468x60 AD ENDS HERE -->
</td>
                <td width="8"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <table bgcolor="#006699" align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td width="100%" align="middle" valign="center">    <font face="Verdana,Geneva,Arial,Helvetica,sans-serif" size="1" color="#ffffff">
        <p>
            <br />
            <a href="http://www.javaworld.com"><font color="#ffffff">HOME</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/features/index.shtml"><font color="#ffffff">FEATURED TUTORIALS</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/columns/index.shtml"><font color="#ffffff">COLUMNS</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/news-reviews/index.shtml"><font color="#ffffff">NEWS & REVIEWS</font></a>&nbsp;|&nbsp;
            <a href="http://forums.idg.net/webx?13@@.ee6b802"><font color="#ffffff">FORUM</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/resources/index.shtml"><font color="#ffffff">JW RESOURCES</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/info/jw-about-index.shtml"><font color="#ffffff">ABOUT JW</font></a>&nbsp;|&nbsp;
            <a href="http://www.javaworld.com/feedback"><font color="#ffffff">FEEDBACK</font></a>
        </p>
        <p>

            <a href="http://www.javaworld.com/javaworld/common/jw-copyright.html"><font color="#ffffff">Copyright © 2002</font></a> JavaWorld.com, an IDG Communications company
        </p>
    </font>
</td>
                <td bgcolor="#ffffff" width="8"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
            <tr>
                <td width="100%" align="right" valign="top"><img height=8 src="http://www.javaworld.com/images/c_blrtbottom.gif" width=8 border=0 ></td>
                <td bgcolor="#ffffff" width="8"><img height=8 src="http://www.javaworld.com/images/spacer.gif" width=8 border=0 ></td>
            </tr>
        </table>
        <!--TOP_BANNER-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=top;sz=468x60;tile=1;ord=687468?" width=468 height=60 visibility="hidden" onLoad="moveToAbsolute(layer1.pageX,layer1.pageY);clip.height=60;clip.width=468;visibility='show';">
</LAYER>

<!--125x125-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=med;sz=125x125;tile=2;ord=687468?" width=125 height=125 visibility="hidden" onLoad="moveToAbsolute(layer2.pageX,layer2.pageY);clip.height=125;clip.width=125;visibility='show';">
</LAYER>

<!--SKYSCRAPER-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=skyscraper;sz=120x600;tile=3;ord=687468?" width=120 height=600 visibility="hidden" onLoad="moveToAbsolute(layer3.pageX,layer3.pageY);clip.height=600;clip.width=120;visibility='show';">
</LAYER>

<!--BOTTOM_BANNER-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=bottom;sz=468x60;tile=4;ord=687468?" width=468 height=60 visibility="hidden" onLoad="moveToAbsolute(layer4.pageX,layer4.pageY);clip.height=60;clip.width=468;visibility='show';">
</LAYER>

<!--Big AD-->
<LAYER SRC="http://ad.doubleclick.net/adl/idg.us.idgnet.javaworld/articles;pos=rectangle;sz=336x280;tile=5;ord=687468" width=336 height=280 visibility="hidden" onLoad="moveToAbsolute(layer5.pageX,layer5.pageY);clip.height=280;clip.width=336;visibility='show';">
</LAYER>
    </body>
<!-- stories2 -->
<!-- DOCID 783591 -->
</html>

